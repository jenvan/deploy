(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b828925c"],{"0124":function(e,t,a){"use strict";(function(e){var o=a("7a23"),c=a("5502"),s=a("2824"),i=a("a6e6");t["a"]={components:{BaseLayout:s["a"],Pay:i["default"]},name:"DigitalDetail",props:{action:{type:String,default:"member"},cid:{type:[String,Number],default:0},id:{type:[String,Number],default:0}},data(){const e=Object(o["reactive"])({topCat:{},subCat:{},active:0,list:{},spu:{},sku:{},item:{},type:0,title:"",intro:"",id:0,api:0,account:"",quantity:1,payData:{},payShow:!1,popup:!1});return{state:e}},created(){this.$http.get("/digital/category?type="+this.action+"&deep=0").then(e=>{this.state.title=e[0].name}),this.$http.post("/digital/category?id="+parseInt(this.cid)+"&deep=2").then(t=>{this.state.topCat=t[0],this.state.subCat=e.filter(t[0]["children"],{status:"1"}),this.init()})},computed:{...Object(c["d"])(["config","profile"]),...Object(c["b"])(["uid"])},watch:{$route:function(e,t){e.path==t.path&&e.query!=t.query&&setTimeout(this.init,100)}},methods:{init(){var e=/(\d+)[^\d](\d+)/.exec(this.cid);this.$http.post("/digital/list?cid="+(e?e[1]:this.cid)).then(t=>{this.state.list=t,this.state.active=e?e[2]:Object.keys(t).shift(),this.handleChange()})},handleChange(){this.state.spu=this.state.list[this.state.active]||{},this.state.id=this.id||Object.keys(this.state.spu).shift(),this.handleChoose(this.state.spu[this.state.id]||null)},handleChoose(e){e&&"undefined"!=typeof e.id&&(this.state.item=e,this.state.id=e.id,this.state.type=e.type,this.state.intro=e.intro,this.state.api="",this.state.sku=JSON.parse(e.spec))},handleSubmit(){return this.state.id<=0||this.state.api.length<=0?this.$toast("请选择项目及价格"):0==this.state.type&&this.state.account.length<5?this.$toast("请填写充值账号"):(0==this.state.type&&(this.state.quantity=1),1==this.state.type&&(this.state.account=""),void this.$http.post("/digital/checkout?id="+this.state.id+"&api="+this.state.api+"&account="+this.state.account+"&quantity="+this.state.quantity).then(e=>{this.state.payData={...e,json:JSON.stringify(e)},this.state.payShow=!0}))},handlePay(e){this.state.payShow=!1,e&&this.$dialog.alert({title:"订单已生成",message:"请点击下方“订单记录”查看到账情况",theme:"round-button"})}}}}).call(this,a("81b0"))},"0a9c":function(e,t,a){"use strict";(function(e){a("14d9");var o=a("7a23"),c=a("5502"),s=a("2824"),i=a("6c74");t["a"]={components:{BaseLayout:s["a"],VanCode:i["a"]},props:{code:{type:String,default:""}},data(){const e=Object(o["ref"])(0),t=Object(o["ref"])(new Date),a=Object(o["reactive"])({calendar:!1,type:!0,device:{},order:{},show:!1,popup1:!1,popup2:!1,keyboard:!1,password:""}),c=Object(o["reactive"])({id:0,uid:"",code:"",discount:100,pos:"",box:"",pwd:"",name:"",remark:""}),s=Object(o["ref"])(null),i=Object(o["ref"])("");return{id:e,date:t,state:a,field:c,timer:s,now:i}},created(){if(this.code.length<15)return this.$init(this.init);this.$http.post("/o2o/deviceQuery?imei="+this.code).then(e=>{this.$router.push("?code="+e.code),setTimeout(this.init,500)})},mounted(){this.toggleChat(!1),this.timer=setInterval(()=>{let e=new Date;this.state.calendar||(this.now=(e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()).replace(/([-: ])(\d{1})(?!\d)/g,"$10$2"))},1e3)},unmounted(){this.toggleChat(!0),clearInterval(this.timer)},watch:{id(){this.query()},date(){this.state.calendar=!1,this.query()}},computed:{info(){return 0==this.id?"全部设备":this.field.name||"商户编码："+this.field.code},param(){return"code="+this.field.code+"&pwd="+this.state.password},...Object(c["d"])(["profile"]),...Object(c["b"])(["uid"])},methods:{init(){this.field.code=this.code,this.$http.post("/o2o/deviceList?"+this.param).then(t=>{this.state.device=t,this.field=e.find(t,{code:this.code}),this.id=this.field.id,this.state.popup2=!1}).catch(e=>{969==e.rtn&&(this.state.popup1=!0,this.field.uid=this.uid),968==e.rtn&&(this.state.popup2=!0)})},query(){this.$http.post("/o2o/deviceOrder?"+this.param+"&id="+this.id+"&dt="+this.format(this.date)).then(e=>{this.state.order=e})},bind(){this.$http.post("/o2o/deviceBind?"+this.param,this.field).then(e=>{this.state.popup1=!1,this.state.show=!1,this.init(),this.$dialog.alert({message:"操作成功",theme:"round-button"})}).catch(e=>{this.$dialog.alert({message:e.msg,theme:"round-button"})})},choose(t){this.state.show=!1,this.id=t,this.field=e.find(this.state.device,{id:t})},format(t){if(e.isArray(t))return e.map(t,this.format).join(" ~ ");var a="object"==typeof t?new Date(t):new Date,o=a.getFullYear(),c=""+(a.getMonth()+1),s=""+a.getDate();return c.length<2&&(c="0"+c),s.length<2&&(s="0"+s),[o,c,s].join("-")},getName(t){let a=["被动收款"];return e.isEmpty(t.mobile)||a.push("主动收款（手机）"),e.isEmpty(t.pos)||a.push("主动收款（POS机）"),e.isEmpty(t.box)||a.push("音箱"),a.join("，")},getCode(e){return window.location.protocol+"//"+window.location.host+"/#/o2o/"+e+"?code="+this.field.code},...Object(c["c"])(["auth","toggleChat"])}}}).call(this,a("81b0"))},"0b05":function(e,t,a){"use strict";a.r(t);a("14d9");var o=a("7a23");const c=e=>(Object(o["pushScopeId"])("data-v-ea85e340"),e=e(),Object(o["popScopeId"])(),e),s={class:"box"},i={class:"nav"},n={class:"name1"},l={key:1},r={class:"name2"},d={class:"tab"},h={key:0,class:"panel"},b=c(()=>Object(o["createElementVNode"])("div",{class:"title"},"项目",-1)),p={class:"chooser"},u=["onClick"],O=c(()=>Object(o["createElementVNode"])("div",{class:"title"},"价格",-1)),j={class:"chooser"},m=["onClick"],f={class:"item"},v={class:"sale"},y={class:"face"},C={class:"title"},g=["innerHTML"],k={class:"param"},w=["innerHTML"];function V(e,t,a,c,V,N){const S=Object(o["resolveComponent"])("van-icon"),x=Object(o["resolveComponent"])("van-image"),_=Object(o["resolveComponent"])("van-tab"),E=Object(o["resolveComponent"])("van-tabs"),B=Object(o["resolveComponent"])("van-empty"),D=Object(o["resolveComponent"])("van-field"),T=Object(o["resolveComponent"])("van-stepper"),R=Object(o["resolveComponent"])("van-cell"),H=Object(o["resolveComponent"])("van-action-bar-icon"),A=Object(o["resolveComponent"])("van-action-bar-button"),F=Object(o["resolveComponent"])("van-action-bar"),U=Object(o["resolveComponent"])("van-popup"),$=Object(o["resolveComponent"])("pay"),M=Object(o["resolveComponent"])("BaseLayout");return Object(o["openBlock"])(),Object(o["createBlock"])(M,{title:V.state.title,height:"0"},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",s,[Object(o["createElementVNode"])("div",i,["coupon"!=a.action?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:0,class:"head",style:Object(o["normalizeStyle"])("background: url("+e.$cdn("/assets/upload/1/20220305/image/1646456647.png")+") right top no-repeat;")},[Object(o["createVNode"])(S,{class:"icon",name:V.state.topCat.icon||"vip-card",size:"36"},null,8,["name"]),Object(o["createElementVNode"])("div",n,Object(o["toDisplayString"])(V.state.topCat.name),1)],4)):Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("div",l,[Object(o["createVNode"])(x,{src:V.state.topCat.icon},null,8,["src"]),Object(o["createElementVNode"])("div",r,Object(o["toDisplayString"])(V.state.topCat.name),1)],512)),[[o["vShow"],!V.state.subCat||0==Object.keys(V.state.subCat).length]]),V.state.subCat&&Object.keys(V.state.subCat).length>0?(Object(o["openBlock"])(),Object(o["createBlock"])(E,{key:2,class:Object(o["normalizeClass"])(["tabs",a.action]),active:V.state.active,"onUpdate:active":t[0]||(t[0]=e=>V.state.active=e),"swipe-threshold":3,animated:"",swipeable:"",onChange:N.handleChange},{default:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(V.state.subCat,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])(_,{key:t,name:e.id},{title:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",d,[Object(o["createVNode"])(S,{name:e.icon,size:"36"},null,8,["name"]),Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.name),1)])]),_:2},1032,["name"]))),128))]),_:1},8,["class","active","onChange"])):Object(o["createCommentVNode"])("",!0)]),Object.keys(V.state.spu).length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",h,[b,Object(o["createElementVNode"])("div",p,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(V.state.spu,(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:Object(o["normalizeClass"])(["spu",{active:V.state.id==e.id}]),key:t,onClick:t=>N.handleChoose(e)},Object(o["toDisplayString"])(e.title),11,u))),128))]),O,Object(o["createElementVNode"])("div",j,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(V.state.sku,(e,t)=>Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:Object(o["normalizeClass"])(["sku",{more:Object.keys(V.state.sku).length>3,active:V.state.api==t}]),key:t,onClick:e=>V.state.api=t},[Object(o["createElementVNode"])("div",f,Object(o["toDisplayString"])(e.name),1),Object(o["createElementVNode"])("div",v,"￥"+Object(o["toDisplayString"])(e.sale_price),1),Object(o["createElementVNode"])("div",y,"官方价：￥"+Object(o["toDisplayString"])(e.face_price.replace(".00","")),1)],10,m)),[[o["vShow"],e.stock>0]])),128))]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",C,"描述",512),[[o["vShow"],V.state.intro]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",{class:"intro",innerHTML:e.$safeHTML(V.state.intro)},null,8,g),[[o["vShow"],V.state.intro]])])):(Object(o["openBlock"])(),Object(o["createBlock"])(B,{key:1,description:"暂无项目"}))]),Object(o["createVNode"])(F,{class:"bar"},{default:Object(o["withCtx"])(()=>[Object(o["withDirectives"])(Object(o["createElementVNode"])("div",k,[Object(o["withDirectives"])(Object(o["createVNode"])(D,{modelValue:V.state.account,"onUpdate:modelValue":t[1]||(t[1]=e=>V.state.account=e),border:!1,type:"text",placeholder:"请填写充值账号（手机号）"},null,8,["modelValue"]),[[o["vShow"],0==V.state.type&&V.state.api.length>0]]),Object(o["withDirectives"])(Object(o["createVNode"])(R,{border:!1,title:"购买数量"},{value:Object(o["withCtx"])(()=>[Object(o["createVNode"])(T,{modelValue:V.state.entity,"onUpdate:modelValue":t[2]||(t[2]=e=>V.state.entity=e),theme:"round","input-width":"42","button-size":"24","disable-input":!1,min:"1",max:"100",integer:""},null,8,["modelValue"])]),_:1},512),[[o["vShow"],1==V.state.type&&V.state.api.length>0]])],512),[[o["vShow"],V.state.api.length>0]]),Object(o["createVNode"])(H,{icon:"chat-o",text:"客服",onClick:t[3]||(t[3]=e=>V.state.popup=!0)}),Object(o["createVNode"])(H,{icon:"cash-on-deliver",text:"订单",onClick:t[4]||(t[4]=t=>e.$router.push("/digital/order"))}),Object(o["createVNode"])(A,{type:"danger",text:"立即购买",onClick:N.handleSubmit},null,8,["onClick"])]),_:1}),Object(o["createVNode"])(U,{show:V.state.popup,"onUpdate:show":t[5]||(t[5]=e=>V.state.popup=e),position:"top",style:{height:"50%",padding:"20px"}},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",{class:"contact",innerHTML:e.config.contact},null,8,w)]),_:1},8,["show"]),Object(o["createVNode"])($,Object(o["mergeProps"])(V.state.payData,{show:V.state.payShow,"onUpdate:show":t[6]||(t[6]=e=>V.state.payShow=e),onOnFinish:N.handlePay}),null,16,["show","onOnFinish"])]),_:1},8,["title"])}var N=a("0124"),S=(a("6069"),a("6b0d")),x=a.n(S);const _=x()(N["a"],[["render",V],["__scopeId","data-v-ea85e340"]]);t["default"]=_},"0e96":function(e,t,a){"use strict";a.r(t);var o=a("7a23");const c={class:"box"},s={class:"error"};function i(e,t,a,i,n,l){const r=Object(o["resolveComponent"])("van-tab"),d=Object(o["resolveComponent"])("van-tabs"),h=Object(o["resolveComponent"])("van-code"),b=Object(o["resolveComponent"])("van-icon"),p=Object(o["resolveComponent"])("van-field"),u=Object(o["resolveComponent"])("van-button"),O=Object(o["resolveComponent"])("BaseLayout");return Object(o["openBlock"])(),Object(o["createBlock"])(O,{height:"0"},{head:Object(o["withCtx"])(()=>[Object(o["createVNode"])(d,{class:"tab",type:"card",active:n.action,"onUpdate:active":t[0]||(t[0]=e=>n.action=e)},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(r,{name:"pay",title:"商户收款码"}),Object(o["createVNode"])(r,{name:"biz",title:"商户管理码"})]),_:1},8,["active"])]),default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",c,[Object(o["createVNode"])(h,{type:"qrimage",value:l.qrcode,width:"300",margin:"0"},null,8,["value"]),Object(o["createElementVNode"])("div",{class:"qrcode",onClick:t[1]||(t[1]=t=>e.$copy(l.qrcode))},Object(o["toDisplayString"])(l.qrcode),1),Object(o["createVNode"])(p,{class:"code",type:"text",modelValue:n.code,"onUpdate:modelValue":t[2]||(t[2]=e=>n.code=e),"input-align":"center",label:"商户编码："},{"right-icon":Object(o["withCtx"])(()=>[Object(o["createVNode"])(b,{name:"exchange",size:"18",color:"#F66",onClick:l.make},null,8,["onClick"])]),_:1},8,["modelValue"]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",s,"商户编码长度必须为 8",512),[[o["vShow"],l.show]]),Object(o["createVNode"])(u,{class:"batch",type:"primary",onClick:l.batch,round:"",block:""},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("批量生成")]),_:1},8,["onClick"])])]),_:1})}var n=a("96a5"),l=(a("75f7"),a("6b0d")),r=a.n(l);const d=r()(n["a"],[["render",i],["__scopeId","data-v-610abe34"]]);t["default"]=d},"1a56":function(e,t,a){"use strict";a("ebd6")},2931:function(e,t,a){},"2b99":function(e,t,a){},"2c93":function(e,t,a){"use strict";a.r(t);a("14d9");var o=a("7a23");const c=e=>(Object(o["pushScopeId"])("data-v-141d54a7"),e=e(),Object(o["popScopeId"])(),e),s={class:"panel"},i={class:"list"},n={class:"value"},l={class:"price"},r={class:"book"},d={class:"form"},h={class:"wrapper"},b=c(()=>Object(o["createElementVNode"])("legend",{class:"title"},"已有号码",-1)),p={class:"detail"},u=["innerHTML"],O={class:"wrapper"},j=c(()=>Object(o["createElementVNode"])("legend",{class:"title"},"增加号码",-1)),m={class:"btns"};function f(e,t,a,c,f,v){const y=Object(o["resolveComponent"])("van-button"),C=Object(o["resolveComponent"])("van-cell"),g=Object(o["resolveComponent"])("van-tab"),k=Object(o["resolveComponent"])("van-tabs"),w=Object(o["resolveComponent"])("van-icon"),V=Object(o["resolveComponent"])("van-field"),N=Object(o["resolveComponent"])("van-action-sheet"),S=Object(o["resolveComponent"])("pay"),x=Object(o["resolveComponent"])("BaseLayout");return Object(o["openBlock"])(),Object(o["createBlock"])(x,{title:"话费流量团充",subtitle:"用券最低 95 折起",bg:"linear-gradient(180deg, #FFF, #EEE 10%, #FFF 50%, #FFF)"},{extra:Object(o["withCtx"])(()=>[Object(o["createVNode"])(y,{icon:"todo-list-o",style:{width:"110px",borderRadius:"10px 0 0 10px",color:"#000"},color:"#F6F6F6",onClick:t[0]||(t[0]=t=>e.$router.push("/digital/order?cid="+f.cid))},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("充值记录")]),_:1})]),default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",s,[Object(o["createVNode"])(k,{class:"tabs",type:"card",active:f.state.index,"onUpdate:active":t[1]||(t[1]=e=>f.state.index=e),onChange:v.handleTab},{default:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(f.state.spu,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])(g,{key:t,title:e.title},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",i,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(f.state.sku,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])(C,{class:Object(o["normalizeClass"])(["goods",{active:f.state.api==t}]),key:t,onClick:a=>{f.state.api=t,f.state.price=e.sale_price}},{title:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("span",n,Object(o["toDisplayString"])(parseInt(e.face_price)),1),Object(o["createTextVNode"])(" 元")]),label:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("span",l,Object(o["toDisplayString"])(e.name),1)]),_:2},1032,["class","onClick"]))),128))])]),_:2},1032,["title"]))),128))]),_:1},8,["active","onChange"]),Object(o["createElementVNode"])("div",r,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(f.state.books,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])(C,{key:t,title:e.title,class:Object(o["normalizeClass"])({active:f.state.bid==e.id}),"is-link":"",onClick:t=>v.onSelect(e,!0)},{icon:Object(o["withCtx"])(()=>[Object(o["createVNode"])(w,{class:Object(o["normalizeClass"])(["icon",{active:f.state.bid==e.id}]),name:f.state.bid==e.id?"checked":"circle",onClick:Object(o["withModifiers"])(t=>v.onSelect(e,!1),["stop"])},null,8,["name","class","onClick"])]),label:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("共有 "+Object(o["toDisplayString"])(e.detail.length)+" 人",1)]),_:2},1032,["title","class","onClick"]))),128)),Object(o["createVNode"])(y,{class:"add",type:"default",icon:"add-o",block:"",onClick:v.onCreate},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("新建电话簿")]),_:1},8,["onClick"])]),Object(o["createElementVNode"])("div",d,[Object(o["withDirectives"])(Object(o["createElementVNode"])("div",{class:"total"},"合计："+Object(o["toDisplayString"])(f.state.price)+" * "+Object(o["toDisplayString"])(f.state.count)+" = "+Object(o["toDisplayString"])(f.state.price*f.state.count)+" 元",513),[[o["vShow"],f.state.price*f.state.count>0]]),Object(o["createVNode"])(y,{type:"danger",block:"",onClick:v.handleRecharge},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("立即充值")]),_:1},8,["onClick"])])]),Object(o["createVNode"])(N,{show:f.state.modify,"onUpdate:show":t[6]||(t[6]=e=>f.state.modify=e),title:"电话簿管理"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(V,{type:"text",modelValue:f.state.title,"onUpdate:modelValue":t[2]||(t[2]=e=>f.state.title=e),label:"电话簿名称",placeholder:"请填写","input-align":"right",onChange:t[3]||(t[3]=e=>f.state.bid>0&&v.onSave())},null,8,["modelValue"]),Object(o["withDirectives"])(Object(o["createElementVNode"])("fieldset",h,[b,Object(o["createVNode"])(V,{type:"text",modelValue:f.state.search,"onUpdate:modelValue":t[4]||(t[4]=e=>f.state.search=e),placeholder:"号码查询",clearable:""},null,8,["modelValue"]),Object(o["createElementVNode"])("div",p,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(f.state.book.detail,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])(C,{key:t,value:e.name},{title:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("span",{innerHTML:v.getTitle(e.mobile)},null,8,u)]),extra:Object(o["withCtx"])(()=>[Object(o["createVNode"])(w,{class:"remove",name:"close",onClick:e=>v.onDel(t)},null,8,["onClick"])]),_:2},1032,["value"]))),128))])],512),[[o["vShow"],f.state.bid>0]]),Object(o["createElementVNode"])("fieldset",O,[j,Object(o["createVNode"])(V,{type:"textarea",modelValue:f.state.append,"onUpdate:modelValue":t[5]||(t[5]=e=>f.state.append=e),border:!1,autosize:{maxHeight:120,minHeight:90},placeholder:"每个号码一行（如有姓名，可加在号码后面，用逗号、分号或空格隔开）"},null,8,["modelValue"]),Object(o["createElementVNode"])("div",m,[Object(o["createVNode"])(y,{class:"btn",type:"default",icon:"delete",onClick:v.onRemove},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("删除此电话簿")]),_:1},8,["onClick"]),Object(o["createVNode"])(y,{class:"btn",type:"danger",onClick:v.onAdd},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("增加号码")]),_:1},8,["onClick"])])])]),_:1},8,["show"]),Object(o["createVNode"])(S,Object(o["mergeProps"])(f.state.payData,{show:f.state.payShow,"onUpdate:show":t[7]||(t[7]=e=>f.state.payShow=e),onOnFinish:v.handlePay}),null,16,["show","onOnFinish"])]),_:1})}var v=a("7308"),y=(a("efdb"),a("6b0d")),C=a.n(y);const g=C()(v["a"],[["render",f],["__scopeId","data-v-141d54a7"]]);t["default"]=g},"3c35":function(e,t){(function(t){e.exports=t}).call(this,{})},4003:function(e,t,a){"use strict";(function(e){a("14d9");var o=a("7a23"),c=a("5502"),s=a("2824"),i=a("a6e6");t["a"]={components:{BaseLayout:s["a"],Pay:i["default"]},props:{id:{type:[String,Number],default:1}},data(){const t=Object(o["ref"])({}),a=Object(o["reactive"])({status:-1,spec:[],list:[],popup:!1,payData:{},payShow:!1}),c={link_man:{name:"联系人",type:"text",rules:[{message:"请填写正确的联系人",pattern:/[\S]{2,}/}]},link_phone:{name:"手机号码",type:"number",rules:[{message:"请填写正确的手机号码",pattern:/^1\d{10}$/}]},link_email:{name:"邮箱地址",type:"email",rules:[{message:"请填写正确的邮箱",pattern:/[\w|-|_]{2,}@[\w|\\.]{2,}/}]},link_credit_no:{name:"身份证号",type:"number",rules:[{message:"请填写正确的证件号",pattern:/\d{15,}[x]?/i}]},link_address:{name:"邮寄地址",type:"text",rules:[{message:"请填写正确的邮寄地址",pattern:/[\S]{10,}/}]}},s=Object(o["reactive"])({num:1,...e.mapValues(c,()=>"")});return{detail:t,state:a,fields:c,form:s}},created(){this.init(this.id)},mounted(){this.toggleTabbar(!1)},unmounted(){this.toggleTabbar(!1)},computed:{info(){return 0==this.state.status?"立即抢购":1==this.state.status?"商品已下架":2==this.state.status?"商品不存在":"正在查询 ..."},cust(){let t={},a=e.trim(this.detail.custField," ,").split(",");for(var o in a)"object"==typeof this.fields[a[o]]&&(t[a[o]]=this.fields[a[o]]);return t}},methods:{init(t){this.state.status=-1,this.$http.post("/jcmall/itemdetail?id="+t).then(a=>{if(1!=a.status&&2!=a.status){if(this.state.status=1,3==a.status)return setTimeout(this.$router.back,1e3)}else this.$http.get("/jcmall/itemCheck?id="+t).then(e=>this.state.status=e.productState);let o={productNo:"商品编号",viewName:"商家名称",cityName:"所在市区",viewAddress:"详细地址",businessHours:"营业时间",orderPolicy:"预定规则",orderDesc:"预定说明",startDate:"最早游玩日期",priceStartDate:"价格开始时间",priceEndDate:"价格结束时间",refund_note:"退款说明",user_note:"使用说明",important_not:"重要提示"};for(let t in o)"undefined"==typeof a[t]||e.isEmpty(a[t])||("orderDesc"==t&&(a[t]="<div class='rule'>"+a[t]+"</div>"),this.state.spec.push({name:o[t],value:a[t]}));this.detail=a,!e.isEmpty(a)&&this.$share(a.title,a.cover)}).catch(()=>{this.$router.back()})},strip(e){return e=e.replace(/(max-)?width:[^;|\s]+/gi,"").replace(/section/gi,"div"),e},change(e){this.id!=e&&(this.$router.replace("?id="+e),this.init(e))},checkout(e){this.state.payData={},this.state.payShow=!1,this.$http.post("/jcmall/checkout?id="+this.id,e).then(e=>{this.state.payData={...e,json:JSON.stringify(e)},this.state.payShow=!0})},handlePay(e){this.state.payShow=!1,this.$dialog.alert({title:"订单支付"+(e?"成功":"失败"),message:"请在“我的订单”中查看详细情况",theme:"round-button"}).then(()=>{this.$router.push("order")})},...Object(c["c"])(["toggleTabbar"])}}}).call(this,a("81b0"))},"45cd":function(e,t,a){},"4aee":function(e,t,a){},6069:function(e,t,a){"use strict";a("2931")},"69fb":function(e,t,a){"use strict";a.r(t);a("14d9");var o=a("7a23");const c=e=>(Object(o["pushScopeId"])("data-v-afdd075e"),e=e(),Object(o["popScopeId"])(),e),s={key:0},i={class:"wait"},n=c(()=>Object(o["createElementVNode"])("br",null,null,-1)),l={class:"card"},r=["innerHTML"],d={class:"tool"},h={class:"van-multi-ellipsis--l2"},b=c(()=>Object(o["createElementVNode"])("br",null,null,-1)),p=["innerHTML"];function u(e,t,a,c,u,O){const j=Object(o["resolveComponent"])("van-step"),m=Object(o["resolveComponent"])("van-steps"),f=Object(o["resolveComponent"])("van-cell"),v=Object(o["resolveComponent"])("van-icon"),y=Object(o["resolveComponent"])("van-swipe-item"),C=Object(o["resolveComponent"])("van-swipe"),g=Object(o["resolveComponent"])("van-collapse-item"),k=Object(o["resolveComponent"])("van-collapse"),w=Object(o["resolveComponent"])("van-divider"),V=Object(o["resolveComponent"])("van-action-bar-icon"),N=Object(o["resolveComponent"])("van-action-bar-button"),S=Object(o["resolveComponent"])("van-action-bar"),x=Object(o["resolveComponent"])("van-image"),_=Object(o["resolveComponent"])("van-popup"),E=Object(o["resolveComponent"])("pay"),B=Object(o["resolveComponent"])("BaseLayout");return Object(o["openBlock"])(),Object(o["createBlock"])(B,{title:"订单详情",subtitle:"# "+a.id},{default:Object(o["withCtx"])(()=>[Object(o["withDirectives"])(Object(o["createVNode"])(m,{class:"step",active:c.status},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(j,null,{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("已下单")]),_:1}),Object(o["createVNode"])(j,null,{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("已付款")]),_:1}),Object(o["createVNode"])(j,null,{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("已发货")]),_:1}),Object(o["createVNode"])(j,null,{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("已签收")]),_:1})]),_:1},8,["active"]),[[o["vShow"],c.status<4]]),c.state.order.channel>0?(Object(o["openBlock"])(),Object(o["createBlock"])(f,{key:0,title:e.channel[c.state.order.channel]["name"]+"单号",value:c.state.order.extra,border:!1,onClick:t[0]||(t[0]=t=>e.$copy(c.state.order.extra))},null,8,["title","value"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(k,{class:"bill",modelValue:c.unfold,"onUpdate:modelValue":t[1]||(t[1]=e=>c.unfold=e)},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(g,{name:"0",title:"收货信息",value:0==c.state.order.card?"物流派送":c.state.order.card<0?"电子卡密":"提货卡"},{default:Object(o["withCtx"])(()=>[0==c.state.order.card?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",s,[Object(o["createVNode"])(f,null,{title:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(c.state.order.consignee.name)+"（"+Object(o["toDisplayString"])(c.state.order.consignee.mobile)+"）",1)]),label:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(c.state.order.consignee.province)+" "+Object(o["toDisplayString"])(c.state.order.consignee.city)+" "+Object(o["toDisplayString"])(c.state.order.consignee.county)+" "+Object(o["toDisplayString"])(c.state.order.consignee.address),1)]),_:1}),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(c.state.order.logistics,(t,s,i)=>(Object(o["openBlock"])(),Object(o["createBlock"])(f,{key:s,title:t.dt+(Object.keys(c.state.order.logistics).length>1?"（包裹 "+(i+1)+"）":""),label:t.msg,border:"","is-link":"",onClick:t=>e.$router.push("/my/order/track?id="+a.id+"&lid="+s)},null,8,["title","label","onClick"]))),128))])):(Object(o["openBlock"])(),Object(o["createBlock"])(C,{key:1,class:"swipe"},{indicator:Object(o["withCtx"])(({active:e})=>[Object(o["withDirectives"])(Object(o["createElementVNode"])("div",{class:"indicator"},Object(o["toDisplayString"])(e+1)+" / "+Object(o["toDisplayString"])(c.state.cards.length),513),[[o["vShow"],c.state.cards.length>0]])]),default:Object(o["withCtx"])(()=>[Object(o["withDirectives"])(Object(o["createElementVNode"])("div",i,[Object(o["createVNode"])(v,{name:"card",size:"96"}),n,Object(o["createTextVNode"])("卡密尚未发货 ")],512),[[o["vShow"],0==c.state.cards.length]]),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(c.state.cards,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])(y,{key:t,style:Object(o["normalizeStyle"])({background:e.bg})},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",l,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(c.state.order.card>0?"提货卡号：":"")+"**** ",1),Object(o["createElementVNode"])("span",{innerHTML:e.token.substr(4).replace(/([\s|\|,]+)/gm,"<br>")},null,8,r)]),Object(o["createElementVNode"])("div",d,[Object(o["createVNode"])(v,{name:"more-o",onClick:t=>O.onFinish()&O.copy(e.token)},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" 复制卡密")]),_:2},1032,["onClick"]),Object(o["createTextVNode"])("   "),Object(o["createVNode"])(v,{name:"photo-o",onClick:t=>O.onFinish()&O.share(e.token,e.deadline)},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" 查看卡片")]),_:2},1032,["onClick"])]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",{class:"deadline"}," 有效期至："+Object(o["toDisplayString"])(e.deadline.substr(0,10)),513),[[o["vShow"],e.deadline&&e.deadline.length>0]])]),_:2},1032,["style"]))),128))]),_:1}))]),_:1},8,["value"]),Object(o["createVNode"])(g,{name:"1",title:"商品信息",value:"共 "+(c.state.order.card<=0?c.state.order.total:c.state.order.card+" x "+c.state.order.total/c.state.order.card)+" 件"},{default:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(c.state.order.detail,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])(f,{key:t,label:e.spec,style:{alignItems:"center"},onClick:t=>O.onView(e)},{icon:Object(o["withCtx"])(()=>[Object(o["createVNode"])(v,{class:"img",name:e.image,size:"32"},null,8,["name"])]),title:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",h,Object(o["toDisplayString"])(e.title),1)]),extra:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" x"+Object(o["toDisplayString"])(e.num),1)]),_:2},1032,["label","onClick"]))),128))]),_:1},8,["value"]),Object(o["createVNode"])(g,{name:"2",title:"订单总额",value:c.state.order.amount+" 元"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(f,{title:"实付积分",value:c.state.order.point+" 分"},null,8,["value"]),Object(o["createVNode"])(f,{title:"实付现金",value:c.state.order.cash+" 元"},null,8,["value"])]),_:1},8,["value"]),Object(o["createVNode"])(g,{name:"3",title:"交易状态"},{value:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",{style:Object(o["normalizeStyle"])({color:c.state.order.color})},Object(o["toDisplayString"])(c.state.order.result),5)]),default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(f,{title:"创建时间",value:c.state.order.dt_create},null,8,["value"]),Object(o["createVNode"])(f,{title:"付款时间",value:c.state.order.dt_pay},null,8,["value"]),Object(o["createVNode"])(f,{title:"发货时间",value:c.state.order.dt_send},null,8,["value"]),Object(o["createVNode"])(f,{title:"完成时间",value:c.state.order.dt_finish},null,8,["value"])]),_:1})]),_:1},8,["modelValue"]),Object(o["createVNode"])(w,{style:{color:"#EEE"},onClick:t[2]||(t[2]=t=>e.$copy(a.id+" "+c.state.order.extra))},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("# "+Object(o["toDisplayString"])(a.id)+" #",1)]),_:1}),Object(o["createVNode"])(S,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(V,{icon:"chat-o",text:"客服",onClick:t[3]||(t[3]=e=>c.state.popup2=!0)}),0==c.state.order.status?(Object(o["openBlock"])(),Object(o["createBlock"])(N,{key:0,type:"warning",text:"关闭订单",onClick:O.onClose},null,8,["onClick"])):Object(o["createCommentVNode"])("",!0),0==c.state.order.status?(Object(o["openBlock"])(),Object(o["createBlock"])(N,{key:1,type:"primary",text:"立即付款",onClick:O.onPay},null,8,["onClick"])):Object(o["createCommentVNode"])("",!0),0==c.state.order.card&&2==c.state.order.status?(Object(o["openBlock"])(),Object(o["createBlock"])(N,{key:2,type:"success",text:"确认收货",onClick:O.onFinish},null,8,["onClick"])):Object(o["createCommentVNode"])("",!0),0==c.state.order.card&&c.state.order.status>0&&c.state.order.status<4?(Object(o["openBlock"])(),Object(o["createBlock"])(N,{key:3,type:"danger",text:"申请售后",onClick:O.onService},null,8,["onClick"])):Object(o["createCommentVNode"])("",!0)]),_:1}),Object(o["createVNode"])(_,{show:c.state.popup1,"onUpdate:show":t[4]||(t[4]=e=>c.state.popup1=e)},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(x,{class:"giftcard",src:c.state.giftcard,width:"300"},{default:Object(o["withCtx"])(()=>[b,Object(o["createTextVNode"])("长按图片保存到手机或分享给好友")]),_:1},8,["src"])]),_:1},8,["show"]),Object(o["createVNode"])(_,{show:c.state.popup2,"onUpdate:show":t[5]||(t[5]=e=>c.state.popup2=e),position:"top",style:{height:"50%",padding:"20px"}},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",{class:"contact",innerHTML:e.config.contact},null,8,p)]),_:1},8,["show"]),Object(o["createVNode"])(E,Object(o["mergeProps"])(c.state.payData,{show:c.state.payShow,"onUpdate:show":t[6]||(t[6]=e=>c.state.payShow=e),onOnFinish:O.handlePay}),null,16,["show","onOnFinish"])]),_:1},8,["subtitle"])}var O=a("b1c2"),j=(a("a49f"),a("6b0d")),m=a.n(j);const f=m()(O["a"],[["render",u],["__scopeId","data-v-afdd075e"]]);t["default"]=f},"6c9e":function(e,t,a){"use strict";a("2b99")},7308:function(e,t,a){"use strict";(function(e){a("14d9");var o=a("7a23"),c=a("5502"),s=a("2824"),i=a("a6e6");t["a"]={components:{BaseLayout:s["a"],Pay:i["default"]},data(){const e=3588,t=Object(o["reactive"])({index:0,spu:[],sku:[],id:0,api:"",price:0,payData:{},payShow:!1,books:[],bid:0,count:0,title:"",book:{},search:"",append:"",modify:!1}),a=[];return{cid:e,state:t,list:a}},created(){this.initBook(),this.$http.get("/digital/list?cid="+this.cid).then(e=>{var t=Object.values(e)[0];for(var a in t)t[a]["spec"]=JSON.parse(t[a]["spec"]);this.state.spu=t,this.handleTab()})},methods:{handleTab(){this.state.id=this.state.spu[this.state.index]["id"],this.state.sku=this.state.spu[this.state.index]["spec"]},handleRecharge(){return this.state.id<=0||this.state.api.length<=3?this.$toast("请选择充值项目"):0==this.state.bid||0==this.list.length?this.$toast("无有效的手机号码"):void this.$http.post("/digital/checkout?id="+this.state.id+"&api="+this.state.api+"&book="+this.state.bid).then(e=>{this.state.payData={...e,json:JSON.stringify(e)},this.state.payShow=!0})},handlePay(e){this.state.payShow=!1,e&&this.$dialog.alert({title:"订单已生成",message:"请点击下方“订单记录”查看到账情况",theme:"round-button"})},onSelect(t,a){this.state.book=t,this.state.bid=t.id,this.state.count=t.detail.length,this.state.title=t.title,this.state.modify=a,this.list=e.clone(t.detail)},onDel(e){this.state.book.detail.splice(e,1),this.onSave()},onAdd(){0==this.state.bid&&(this.state.book.detail=[]);let t=e.filter(this.state.append.replace("\r","\n").split("\n"));for(let a in t){let o=e.trim(t[a]),c=new RegExp("^([\\d]{11})[，；,;\\s]*(.*)$","i");c.test(o)&&this.state.book.detail.push({mobile:o.match(c)[1],name:o.match(c)[2]})}if(0==this.state.book.detail.length)return this.$toast("无有效的手机号码");this.onSave()},onSave(){this.$http.post("/digital/booksave?id="+this.state.bid+"&title="+this.state.title,{detail:JSON.stringify(this.state.book.detail)}).then(e=>{this.state.append="",this.initBook(),this.state.modify=this.state.bid>0})},onCreate(){this.state.modify=!0,this.state.bid=0,this.state.title="",this.state.book={}},onRemove(){if(0==this.state.bid)return this.$toast("空白电话簿无法删除");this.$http.post("/digital/booksave?id="+this.state.bid+"&remove=1").then(()=>{this.state.append="",this.initBook(),this.state.modify=!1})},initBook(){this.$http.get("/digital/booklist").then(e=>{this.state.books=e})},getTitle(e){return 0==this.state.search.length||-1==e.toString().search(this.state.search)?e:e.toString().replace(this.state.search,"<b style='color:red;'>"+this.state.search+"</b>")},...Object(c["c"])(["auth"])}}}).call(this,a("81b0"))},"75f7":function(e,t,a){"use strict";a("f0f4")},7636:function(e,t,a){"use strict";a("8b21")},"7a40":function(e,t,a){},8237:function(module,exports,__webpack_require__){(function(process,global){var __WEBPACK_AMD_DEFINE_RESULT__;
/**
 * [js-md5]{@link https://github.com/emn178/js-md5}
 *
 * @namespace md5
 * @version 0.7.3
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(){"use strict";var ERROR="input is invalid type",WINDOW="object"===typeof window,root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"===typeof self,NODE_JS=!root.JS_MD5_NO_NODE_JS&&"object"===typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&"object"===typeof module&&module.exports,AMD=__webpack_require__("3c35"),ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!==typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}!root.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"===typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e){return function(t){return new Md5(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Md5},e.update=function(t){return e.create().update(t)};for(var t=0;t<OUTPUT_TYPES.length;++t){var a=OUTPUT_TYPES[t];e[a]=createOutputMethod(a)}return e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"===typeof e)return crypto.createHash("md5").update(e,"utf8").digest("hex");if(null===e||void 0===e)throw ERROR;return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash("md5").update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod};function Md5(e){if(e)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(e){if(!this.finalized){var t,a=typeof e;if("string"!==a){if("object"!==a)throw ERROR;if(null===e)throw ERROR;if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(e)))throw ERROR;t=!0}var o,c,s=0,i=e.length,n=this.blocks,l=this.buffer8;while(s<i){if(this.hashed&&(this.hashed=!1,n[0]=n[16],n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),t)if(ARRAY_BUFFER)for(c=this.start;s<i&&c<64;++s)l[c++]=e[s];else for(c=this.start;s<i&&c<64;++s)n[c>>2]|=e[s]<<SHIFT[3&c++];else if(ARRAY_BUFFER)for(c=this.start;s<i&&c<64;++s)o=e.charCodeAt(s),o<128?l[c++]=o:o<2048?(l[c++]=192|o>>6,l[c++]=128|63&o):o<55296||o>=57344?(l[c++]=224|o>>12,l[c++]=128|o>>6&63,l[c++]=128|63&o):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++s)),l[c++]=240|o>>18,l[c++]=128|o>>12&63,l[c++]=128|o>>6&63,l[c++]=128|63&o);else for(c=this.start;s<i&&c<64;++s)o=e.charCodeAt(s),o<128?n[c>>2]|=o<<SHIFT[3&c++]:o<2048?(n[c>>2]|=(192|o>>6)<<SHIFT[3&c++],n[c>>2]|=(128|63&o)<<SHIFT[3&c++]):o<55296||o>=57344?(n[c>>2]|=(224|o>>12)<<SHIFT[3&c++],n[c>>2]|=(128|o>>6&63)<<SHIFT[3&c++],n[c>>2]|=(128|63&o)<<SHIFT[3&c++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++s)),n[c>>2]|=(240|o>>18)<<SHIFT[3&c++],n[c>>2]|=(128|o>>12&63)<<SHIFT[3&c++],n[c>>2]|=(128|o>>6&63)<<SHIFT[3&c++],n[c>>2]|=(128|63&o)<<SHIFT[3&c++]);this.lastByteIndex=c,this.bytes+=c-this.start,c>=64?(this.start=c-64,this.hash(),this.hashed=!0):this.start=c}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=EXTRA[3&t],t>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var e,t,a,o,c,s,i=this.blocks;this.first?(e=i[0]-680876937,e=(e<<7|e>>>25)-271733879<<0,o=(-1732584194^2004318071&e)+i[1]-117830708,o=(o<<12|o>>>20)+e<<0,a=(-271733879^o&(-271733879^e))+i[2]-1126478375,a=(a<<17|a>>>15)+o<<0,t=(e^a&(o^e))+i[3]-1316259209,t=(t<<22|t>>>10)+a<<0):(e=this.h0,t=this.h1,a=this.h2,o=this.h3,e+=(o^t&(a^o))+i[0]-680876936,e=(e<<7|e>>>25)+t<<0,o+=(a^e&(t^a))+i[1]-389564586,o=(o<<12|o>>>20)+e<<0,a+=(t^o&(e^t))+i[2]+606105819,a=(a<<17|a>>>15)+o<<0,t+=(e^a&(o^e))+i[3]-1044525330,t=(t<<22|t>>>10)+a<<0),e+=(o^t&(a^o))+i[4]-176418897,e=(e<<7|e>>>25)+t<<0,o+=(a^e&(t^a))+i[5]+1200080426,o=(o<<12|o>>>20)+e<<0,a+=(t^o&(e^t))+i[6]-1473231341,a=(a<<17|a>>>15)+o<<0,t+=(e^a&(o^e))+i[7]-45705983,t=(t<<22|t>>>10)+a<<0,e+=(o^t&(a^o))+i[8]+1770035416,e=(e<<7|e>>>25)+t<<0,o+=(a^e&(t^a))+i[9]-1958414417,o=(o<<12|o>>>20)+e<<0,a+=(t^o&(e^t))+i[10]-42063,a=(a<<17|a>>>15)+o<<0,t+=(e^a&(o^e))+i[11]-1990404162,t=(t<<22|t>>>10)+a<<0,e+=(o^t&(a^o))+i[12]+1804603682,e=(e<<7|e>>>25)+t<<0,o+=(a^e&(t^a))+i[13]-40341101,o=(o<<12|o>>>20)+e<<0,a+=(t^o&(e^t))+i[14]-1502002290,a=(a<<17|a>>>15)+o<<0,t+=(e^a&(o^e))+i[15]+1236535329,t=(t<<22|t>>>10)+a<<0,e+=(a^o&(t^a))+i[1]-165796510,e=(e<<5|e>>>27)+t<<0,o+=(t^a&(e^t))+i[6]-1069501632,o=(o<<9|o>>>23)+e<<0,a+=(e^t&(o^e))+i[11]+643717713,a=(a<<14|a>>>18)+o<<0,t+=(o^e&(a^o))+i[0]-373897302,t=(t<<20|t>>>12)+a<<0,e+=(a^o&(t^a))+i[5]-701558691,e=(e<<5|e>>>27)+t<<0,o+=(t^a&(e^t))+i[10]+38016083,o=(o<<9|o>>>23)+e<<0,a+=(e^t&(o^e))+i[15]-660478335,a=(a<<14|a>>>18)+o<<0,t+=(o^e&(a^o))+i[4]-405537848,t=(t<<20|t>>>12)+a<<0,e+=(a^o&(t^a))+i[9]+568446438,e=(e<<5|e>>>27)+t<<0,o+=(t^a&(e^t))+i[14]-1019803690,o=(o<<9|o>>>23)+e<<0,a+=(e^t&(o^e))+i[3]-187363961,a=(a<<14|a>>>18)+o<<0,t+=(o^e&(a^o))+i[8]+1163531501,t=(t<<20|t>>>12)+a<<0,e+=(a^o&(t^a))+i[13]-1444681467,e=(e<<5|e>>>27)+t<<0,o+=(t^a&(e^t))+i[2]-51403784,o=(o<<9|o>>>23)+e<<0,a+=(e^t&(o^e))+i[7]+1735328473,a=(a<<14|a>>>18)+o<<0,t+=(o^e&(a^o))+i[12]-1926607734,t=(t<<20|t>>>12)+a<<0,c=t^a,e+=(c^o)+i[5]-378558,e=(e<<4|e>>>28)+t<<0,o+=(c^e)+i[8]-2022574463,o=(o<<11|o>>>21)+e<<0,s=o^e,a+=(s^t)+i[11]+1839030562,a=(a<<16|a>>>16)+o<<0,t+=(s^a)+i[14]-35309556,t=(t<<23|t>>>9)+a<<0,c=t^a,e+=(c^o)+i[1]-1530992060,e=(e<<4|e>>>28)+t<<0,o+=(c^e)+i[4]+1272893353,o=(o<<11|o>>>21)+e<<0,s=o^e,a+=(s^t)+i[7]-155497632,a=(a<<16|a>>>16)+o<<0,t+=(s^a)+i[10]-1094730640,t=(t<<23|t>>>9)+a<<0,c=t^a,e+=(c^o)+i[13]+681279174,e=(e<<4|e>>>28)+t<<0,o+=(c^e)+i[0]-358537222,o=(o<<11|o>>>21)+e<<0,s=o^e,a+=(s^t)+i[3]-722521979,a=(a<<16|a>>>16)+o<<0,t+=(s^a)+i[6]+76029189,t=(t<<23|t>>>9)+a<<0,c=t^a,e+=(c^o)+i[9]-640364487,e=(e<<4|e>>>28)+t<<0,o+=(c^e)+i[12]-421815835,o=(o<<11|o>>>21)+e<<0,s=o^e,a+=(s^t)+i[15]+530742520,a=(a<<16|a>>>16)+o<<0,t+=(s^a)+i[2]-995338651,t=(t<<23|t>>>9)+a<<0,e+=(a^(t|~o))+i[0]-198630844,e=(e<<6|e>>>26)+t<<0,o+=(t^(e|~a))+i[7]+1126891415,o=(o<<10|o>>>22)+e<<0,a+=(e^(o|~t))+i[14]-1416354905,a=(a<<15|a>>>17)+o<<0,t+=(o^(a|~e))+i[5]-57434055,t=(t<<21|t>>>11)+a<<0,e+=(a^(t|~o))+i[12]+1700485571,e=(e<<6|e>>>26)+t<<0,o+=(t^(e|~a))+i[3]-1894986606,o=(o<<10|o>>>22)+e<<0,a+=(e^(o|~t))+i[10]-1051523,a=(a<<15|a>>>17)+o<<0,t+=(o^(a|~e))+i[1]-2054922799,t=(t<<21|t>>>11)+a<<0,e+=(a^(t|~o))+i[8]+1873313359,e=(e<<6|e>>>26)+t<<0,o+=(t^(e|~a))+i[15]-30611744,o=(o<<10|o>>>22)+e<<0,a+=(e^(o|~t))+i[6]-1560198380,a=(a<<15|a>>>17)+o<<0,t+=(o^(a|~e))+i[13]+1309151649,t=(t<<21|t>>>11)+a<<0,e+=(a^(t|~o))+i[4]-145523070,e=(e<<6|e>>>26)+t<<0,o+=(t^(e|~a))+i[11]-1120210379,o=(o<<10|o>>>22)+e<<0,a+=(e^(o|~t))+i[2]+718787259,a=(a<<15|a>>>17)+o<<0,t+=(o^(a|~e))+i[9]-343485551,t=(t<<21|t>>>11)+a<<0,this.first?(this.h0=e+1732584193<<0,this.h1=t-271733879<<0,this.h2=a-1732584194<<0,this.h3=o+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+a<<0,this.h3=this.h3+o<<0)},Md5.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,a=this.h2,o=this.h3;return HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,a=this.h2,o=this.h3;return[255&e,e>>8&255,e>>16&255,e>>24&255,255&t,t>>8&255,t>>16&255,t>>24&255,255&a,a>>8&255,a>>16&255,a>>24&255,255&o,o>>8&255,o>>16&255,o>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var e,t,a,o="",c=this.array(),s=0;s<15;)e=c[s++],t=c[s++],a=c[s++],o+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[63&(e<<4|t>>>4)]+BASE64_ENCODE_CHAR[63&(t<<2|a>>>6)]+BASE64_ENCODE_CHAR[63&a];return e=c[s],o+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[e<<4&63]+"==",o};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))})()}).call(this,__webpack_require__("4362"),__webpack_require__("c8ba"))},8266:function(e,t,a){"use strict";a("45cd")},"8b21":function(e,t,a){},"8f59":function(e,t,a){"use strict";a("ccbb")},"96a5":function(e,t,a){"use strict";(function(e){var o=a("7a23"),c=a("5502"),s=a("2824"),i=a("6c74"),n=a("8237"),l=a.n(n);t["a"]={components:{BaseLayout:s["a"],VanCode:i["a"]},data(){const e=Object(o["ref"])("pay"),t=Object(o["ref"])("88888888");return{action:e,code:t}},computed:{qrcode(){return window.location.protocol+"//"+window.location.host+"/#/o2o/"+this.action+"?code="+this.code},show(){return 8!==this.code.length},...Object(c["d"])(["profile"])},methods:{make(){this.code=l()((new Date).getTime().toString()).substr(8,8)},batch(){let t=e.map(Array(100),e=>l()((new Date).getTime().toString()+Math.random()).substr(8,8));this.$copy(t.join("\r\n"))},...Object(c["c"])(["auth"])}}}).call(this,a("81b0"))},a379:function(e,t,a){"use strict";a.r(t);a("14d9");var o=a("7a23");const c=e=>(Object(o["pushScopeId"])("data-v-6d60c892"),e=e(),Object(o["popScopeId"])(),e),s={class:"panel"},i=c(()=>Object(o["createElementVNode"])("div",{class:"subject"},"金额",-1)),n={class:"panel"},l=c(()=>Object(o["createElementVNode"])("div",{class:"stripe"},null,-1)),r=["innerHTML"],d=["innerHTML"];function h(e,t,a,c,h,b){const p=Object(o["resolveComponent"])("van-icon"),u=Object(o["resolveComponent"])("van-cell"),O=Object(o["resolveComponent"])("van-field"),j=Object(o["resolveComponent"])("van-number-keyboard"),m=Object(o["resolveComponent"])("pay",!0),f=Object(o["resolveComponent"])("BaseLayout");return Object(o["openBlock"])(),Object(o["createBlock"])(f,{title:b.title,bg:"#F6F6F6",fg:"#000",navbar:"hide"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(u,{class:"user",title:"向"+(h.state.user.merchant?"商户":"个人")+b.title,border:!1,label:h.state.user.nickname,onClick:b.handleManage},{extra:Object(o["withCtx"])(()=>[Object(o["createVNode"])(p,{class:"avatar",name:h.state.user.avatar||"manager",size:"48",color:"#"+Math.random().toString(16).slice(-6)},null,8,["name","color"])]),_:1},8,["title","label","onClick"]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",s,[i,Object(o["createVNode"])(O,{class:"amount",type:"number",modelValue:h.state.amount,"onUpdate:modelValue":t[0]||(t[0]=e=>h.state.amount=e),label:"￥",formatter:b.formarter,readonly:""},null,8,["modelValue","formatter"]),Object(o["createVNode"])(j,{modelValue:h.state.amount,"onUpdate:modelValue":t[1]||(t[1]=e=>h.state.amount=e),show:!0,theme:"custom","extra-key":".",maxlength:"6","close-button-text":b.title,"safe-area-inset-bottom":!1,"blur-on-close":!1,onClose:b.handlePay},null,8,["modelValue","close-button-text","onClose"])],512),[[o["vShow"],!h.state.resultShow]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",n,[l,Object(o["createElementVNode"])("div",{class:"result",style:Object(o["normalizeStyle"])({borderColor:h.state.resultColor})},[Object(o["createElementVNode"])("div",{class:"title",style:Object(o["normalizeStyle"])({color:h.state.resultColor})},Object(o["toDisplayString"])(h.state.resultTitle),5),Object(o["createElementVNode"])("div",{class:"info",innerHTML:h.state.resultInfo},null,8,r),Object(o["createElementVNode"])("div",{class:"link",onClick:t[2]||(t[2]=t=>e.$router.push("/my/point"))},Object(o["toDisplayString"])(h.state.resultLink),1),Object(o["createVNode"])(p,{class:"icon",name:h.state.resultIcon,color:h.state.resultColor},null,8,["name","color"])],4)],512),[[o["vShow"],h.state.resultShow]]),Object(o["createVNode"])(m,Object(o["mergeProps"])({show:h.state.payShow,"onUpdate:show":t[3]||(t[3]=e=>h.state.payShow=e)},h.state.payData,{onOnFinish:b.handlePayResult}),null,16,["show","onOnFinish"]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",{class:"watermark",innerHTML:a.code+"<br>"+e.uid+"<br>"+h.now},null,8,d),[[o["vShow"],h.state.resultShow]])]),_:1},8,["title"])}var b=a("5502"),p=a("2824"),u=a("a6e6"),O={components:{BaseLayout:p["a"],Pay:u["default"]},props:{code:{type:String,default:""}},data(){const e=Object(o["reactive"])({user:{},amount:"",payData:{},payShow:!1,resultShow:!1,resultColor:"",resultIcon:"",resultTitle:"",resultInfo:"",resultLink:""}),t=(Object(o["ref"])(null),Object(o["ref"])(""));return{state:e,now:t}},created(){let e=this.payin?"scanpay?action=user&code=":"pay?code=";this.$http.post("/o2o/"+e+this.code).then(e=>{this.state.user=e})},mounted(){this.toggleChat(!1),this.timer=setInterval(()=>{let e=new Date;this.now=(e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()).replace(/([-: ])(\d{1})(?!\d)/g,"$10$2")},1e3)},unmounted(){this.toggleChat(!0),clearInterval(this.timer)},computed:{payin(){return/^\d{10,}$/.test(this.code)},title(){return this.payin?"收款":"付款"},...Object(b["d"])(["profile"]),...Object(b["b"])(["uid"])},methods:{formarter(e){return e?e.toString().replace(/\.(\d\d).+/,".$1"):""},handleManage(){8!=this.code.length||this.uid>1e4||(this.$copy(this.code),this.$router.push("biz?code="+this.code))},handlePay(){if(this.state.payShow)return;let e=parseFloat(this.state.amount);if(isNaN(e))return this.$toast("请输入"+this.title+"金额");let t=this.state.user.merchant||this.payin?.1:2;if(e<t||e>=1e3)return this.$toast(this.title+"金额最小"+t+"元、最大1000元");this.state.amount=e.toString(),this.payin?this.$http.post("/o2o/scanpay?code="+this.code+"&fee="+this.state.amount).then(e=>{this.handlePayResult(!0,e)}).catch(e=>{this.handlePayResult(!1,e.msg)}):this.$http.post("/o2o/pay?code="+this.code+"&amount="+this.state.amount).then(e=>{this.state.payData={...e,json:JSON.stringify(e)},this.state.payShow=!0})},handlePayResult(e,t){let a="交易时间："+this.now;t&&(t.oid&&(a+="<br>交易流水："+t.oid),t.fee&&(a+="<br>交易金额：￥"+t.fee),t.charge&&(a+="<br>实付金额：￥"+t.charge)),this.state.resultShow=!0,this.state.resultColor=e?"#6C0":"#C00",this.state.resultIcon=e?"checked":"close",this.state.resultTitle=this.title+(e?t&&t.fee?" "+t.fee+" 元":"成功":"失败"),this.state.resultInfo=e?a:t,this.state.resultLink=e?"交易详情 >>>":""},...Object(b["c"])(["toggleChat"])}},j=(a("a57c"),a("6b0d")),m=a.n(j);const f=m()(O,[["render",h],["__scopeId","data-v-6d60c892"]]);t["default"]=f},a49f:function(e,t,a){"use strict";a("cffa")},a57c:function(e,t,a){"use strict";a("4aee")},b1c2:function(e,t,a){"use strict";(function(e){a("14d9");var o=a("7a23"),c=a("5502"),s=a("2824"),i=a("a6e6");t["a"]={components:{BaseLayout:s["a"],Pay:i["default"]},props:{id:{type:[String,Number],default:0}},setup(){const e=Object(o["reactive"])({order:{},cards:[],popup1:!1,giftcard:"",popup2:!1,payData:{},payShow:!1}),t=Object(o["ref"])(0),a=Object(o["ref"])(["0","1"]),c=Object(o["ref"])(0);return{state:e,status:t,unfold:a,active:c}},created(){this.onLoad()},computed:{...Object(c["d"])(["channel","config"])},methods:{onLoad(){this.state.cards=[],this.$http.post("/mall/orderDetail?id="+this.id).then(t=>{if(this.state.order=t,this.state.order.color=["#CCC","#666","#00C","#0C0","#C00"][t.status],this.state.order.result=["未付款","已付款","已发货","交易成功","交易关闭"][t.status],this.status=t.status,0!=t.card){for(var a in t.cards)t.cards[a].bg="rgb("+e.random(150,250)+","+e.random(150,250)+","+e.random(150,250)+")";this.state.cards=t.cards}t.channel>0&&t.status>0&&this.$http.get("/"+this.channel[t.channel]["type"]+"/orderUpdate?id="+this.id)})},onView(e){let t="/mall/item?id="+e.spu;this.state.order.channel>0&&(t="/"+this.channel[this.state.order.channel]["type"]+"/item?id="+e.spu),this.$router.push(t)},onPay(){let e="/mall/pay";this.state.order.channel>0&&(e="/"+this.channel[this.state.order.channel]["type"]+"/pay"),this.$http.post(e+"?oid="+this.id).then(e=>{this.state.payData={...e,json:JSON.stringify(e)},this.state.payShow=!0})},onClose(){0==this.state.order.status&&this.$http.post("/mall/orderClose?id="+this.id).then(this.onLoad)},onFinish(){2==this.state.order.status&&this.$http.post("/mall/orderFinish?id="+this.id).then(this.onLoad)},onService(){this.$router.push("/my/service?id="+this.id)},handlePay(e){this.state.payShow=!1,this.$dialog.alert({message:"订单支付"+(e?"成功":"失败"),theme:"round-button"}).then(this.onLoad)},copy(e){this.$copy(e,"已复制到剪贴板\n建议采用图片方式分享")},share(e,t){let a=this.state.order.card>0?"pick":"",o="string"==typeof this.state.order.detail[0]["digital"]?JSON.parse(this.state.order.detail[0]["digital"]):{};console.log(o),"string"==typeof o["tag"]&&/^gift/i.test(o["tag"])&&(a="gift");let c=this.$host+"/mall/card?type="+a+"&token="+encodeURIComponent(e)+"&deadline="+encodeURIComponent(t);"object"==typeof o&&("string"==typeof o["bg"]&&(c+="&bg="+o["bg"]),"undefined"!=typeof o["x"]&&(c+="&x="+o["x"]),"undefined"!=typeof o["y"]&&(c+="&y="+o["y"]),c+="&qr="+(o["qr"]?o["qr"]:0)),this.state.giftcard=c,this.state.popup1=!0}}}}).call(this,a("81b0"))},bc21:function(e,t,a){"use strict";a.r(t);var o=a("7a23");const c={class:"main"},s={key:0};function i(e,t,a,i,n,l){const r=Object(o["resolveComponent"])("van-switch"),d=Object(o["resolveComponent"])("van-cell"),h=Object(o["resolveComponent"])("van-stepper"),b=Object(o["resolveComponent"])("van-card"),p=Object(o["resolveComponent"])("van-submit-bar"),u=Object(o["resolveComponent"])("pay"),O=Object(o["resolveComponent"])("BaseLayout");return Object(o["openBlock"])(),Object(o["createBlock"])(O,{title:"确认订单"},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",c,[n.state.digiCard?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",s,[Object(o["createVNode"])(d,{title:"生成提货卡",border:!1},{"right-icon":Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" "),Object(o["createVNode"])(r,{modelValue:n.state.pickCard,"onUpdate:modelValue":t[0]||(t[0]=e=>n.state.pickCard=e),size:"24"},null,8,["modelValue"])]),_:1}),Object(o["withDirectives"])(Object(o["createVNode"])(d,{title:"提货卡数量"},{"right-icon":Object(o["withCtx"])(()=>[Object(o["createVNode"])(h,{modelValue:n.state.number,"onUpdate:modelValue":t[1]||(t[1]=e=>n.state.number=e),theme:"round","button-size":"22",max:9999},null,8,["modelValue"])]),_:1},512),[[o["vShow"],n.state.pickCard]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[n.state.addr&&n.state.addr.name?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:0,class:"card",size:"large",icon:"location",title:n.state.addr.name+" "+n.state.addr.mobile,label:n.state.addr.province+n.state.addr.city+n.state.addr.county+n.state.addr.address,to:"/my/address/choose?target="+l.target,"is-link":"",center:""},null,8,["title","label","to"])):(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:1,class:"card",size:"large",title:"新增收货地址",to:"/my/address/add?target="+l.target,"is-link":""},null,8,["to"]))],512),[[o["vShow"],!n.state.pickCard]])])),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(n.state.list,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])(b,{class:"item",key:t,title:e.title,desc:e.spec,thumb:e.image,price:e.price,num:e.num},null,8,["title","desc","thumb","price","num"]))),128)),Object(o["createVNode"])(p,{label:"总金额：","button-text":"结算",style:{bottom:"50px"},price:100*l.total,disabled:0==l.total,onSubmit:l.buy},null,8,["price","disabled","onSubmit"]),Object(o["createVNode"])(u,Object(o["mergeProps"])(n.state.payData,{show:n.state.payShow,"onUpdate:show":t[2]||(t[2]=e=>n.state.payShow=e),onOnFinish:l.handlePay}),null,16,["show","onOnFinish"])])]),_:1})}var n=a("c11d"),l=(a("8f59"),a("6b0d")),r=a.n(l);const d=r()(n["a"],[["render",i],["__scopeId","data-v-488ebb78"]]);t["default"]=d},c11d:function(e,t,a){"use strict";(function(e){a("14d9");var o=a("7a23"),c=a("5502"),s=a("2824"),i=a("a6e6");t["a"]={components:{BaseLayout:s["a"],Pay:i["default"]},props:{direct:{type:[String,Number],default:0},digital:{type:[String,Number],default:0},aid:{type:[String,Number],default:0}},data(){const e=Object(o["reactive"])({addr:{},list:[],number:1,amount:0,pickCard:!1,digiCard:!1,payData:{},payShow:!1});return{state:e}},created(){this.state.digiCard=!e.isEmpty(this.digital)&&1==parseInt(this.digital),this.$http.get("/mall/addresslist").then(t=>{for(let e in t)if(0==this.aid&&2==t[e].status||t[e].id==this.aid){this.state.addr=t[e];break}e.isEmpty(this.state.addr)&&!e.isEmpty(t)&&(this.state.addr=t[0])}),this.$http.get("/mall/cartlist?status="+(parseInt(this.direct)+1)).then(e=>{this.state.list=e;let t=0;for(let a in e)t+=this.state.list[a].price*this.state.list[a].num;this.state.amount=t})},computed:{target(){return escape(this.$route.fullPath)},total(){return this.state.pickCard?this.state.amount*this.state.number:this.state.amount},...Object(c["d"])(["profile"])},methods:{buy(){if(e.isEmpty(this.state.addr)&&!this.state.pickCard&&!this.state.digiCard)return this.$toast("请先选择收货地址");let t=0;this.state.pickCard&&(t=this.state.number),this.state.digiCard&&(t=-1),this.$http.post("/mall/checkout?aid="+(this.state.pickCard||this.state.digiCard?0:this.state.addr.id)+"&card="+t+"&direct="+this.direct).then(e=>{this.state.payData={...e,json:JSON.stringify(e)},this.state.payShow=!0})},handlePay(e){this.state.payShow=!1,this.$dialog.alert({title:"订单支付"+(e?"成功":"失败"),message:"请在“我的订单”中查看详细情况",theme:"round-button"}).then(()=>{this.$router.push("/my/order")})}}}}).call(this,a("81b0"))},c9e1:function(e,t,a){"use strict";(function(e){a("14d9");var o=a("7a23"),c=a("5502"),s=a("2824"),i=a("a6e6");t["a"]={components:{BaseLayout:s["a"],Pay:i["default"]},props:{filter:{type:[String,Number],default:""}},data(){const e=Object(o["reactive"])({refreshing:!1,loading:!1,finished:!1,keyword:"",list:[],offset:0,limit:20,popup:!1,detail:{},cards:{},picker:!1,payData:{},payShow:!1}),t=[{name:"新订单",icon:"warning",color:"#F00"},{name:"等待付款",icon:"warning",color:"#C60"},{name:"等待使用",icon:"qr",color:"#00C"},{name:"订单关闭",icon:"clear",color:"#CCC"},{name:"订单完成",icon:"checked",color:"#0C0"}],a={linkMan:"联系人",linkPhone:"手机号码",linkEmail:"邮箱地址",linkCreditNo:"身份证号",linkAddress:"邮寄地址"};return{state:e,status:t,fields:a}},created(){this.onRefresh()},computed:{btn(){return"object"==typeof this.status[this.filter]?this.status[this.filter]["name"]:"所有订单"}},methods:{onRefresh(){this.state.loading=!0,this.state.finished=!1,this.state.offset=0,this.state.list=[],this.onLoad()},onLoad(){this.$http.get("/jcmall/orderList?filter="+this.filter+"&keyword="+this.state.keyword+"&offset="+this.state.offset+"&limit="+this.state.limit).then(e=>{this.state.refreshing=!1,(0==e.length||e.length<this.state.limit)&&(this.state.finished=!0),this.state.loading=!1,this.state.offset+=e.length;for(let t in e){let a=e[t];this.state.list.push(a)}})},onChange(e,t){this.state.picker=!1,"undefined"==typeof t&&(t=""),this.$router.replace("order?filter="+t),setTimeout(this.onRefresh,100)},onPay(e){this.state.payData={},this.state.payShow=!1,this.$http.post("/jcmall/checkout?id="+e.productNo,{oid:e.orderId}).then(e=>{this.state.payData={...e,json:JSON.stringify(e)},this.state.payShow=!0})},onCancel(e){this.$http.post("/jcmall/orderOpt?type=cancelOrder&orderId="+e.orderId).then(this.onRefresh)},onView(t){this.$http.post("/jcmall/orderOpt?type=orderDetail&orderId="+t.orderId).then(t=>{if("object"!=typeof t||"object"!=typeof t["codeUrls"])return this.$toast("订单详情失败，请联系客服处理！");for(var a in e.isPlainObject(t["codeUrls"]["codeUrl"])&&(t["codeUrls"]["codeUrl"]=[t["codeUrls"]["codeUrl"]]),t["codeUrls"]["codeUrl"])t["codeUrls"]["codeUrl"][a]["color"]="rgb("+e.random(220,250)+","+e.random(220,250)+","+e.random(220,250)+")";t["sendContent"]=e.filter([t["sendContent1"],t["sendContent2"],t["sendContent3"]],t=>!e.isEmpty(t)).join("<br>"),this.state.detail=t,this.state.cards=t["codeUrls"]["codeUrl"],this.state.popup=!0})},getStatus(e){return this.status[e.orderState]},...Object(c["c"])(["auth"])}}}).call(this,a("81b0"))},ccbb:function(e,t,a){},cffa:function(e,t,a){},d504:function(e,t,a){"use strict";a.r(t);var o=a("7a23");const c={key:0,class:"loading"};function s(e,t,a,s,i,n){const l=Object(o["resolveComponent"])("van-loading"),r=Object(o["resolveComponent"])("van-empty"),d=Object(o["resolveComponent"])("home");return a.code.length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",c,[Object(o["withDirectives"])(Object(o["createVNode"])(l,{size:"64",vertical:""},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("正在登录中 ...")]),_:1},512),[[o["vShow"],0==s.state.info.length]]),Object(o["withDirectives"])(Object(o["createVNode"])(r,{image:"error"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(s.state.info),1)]),_:1},512),[[o["vShow"],s.state.info.length>0]])])):(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:1,production:!0}))}var i=a("5502"),n=a("bb51"),l={name:"Index",components:{Home:n["default"]},props:{code:{type:String,default:""},redirect:{type:String,default:"/"}},setup(){const e=Object(o["reactive"])({info:""});return{state:e}},created(){this.code.length>0&&this.$http.get("/wechat/login?code="+this.code).then(e=>{this.auth(e),this.$router.replace(this.redirect)}).catch(e=>{996!=e.rtn&&(this.state.info=e.msg)});let e=this.$store.state.scrollInfo,t=e&&"index"==e.tag?e.top:0;t>500&&setTimeout(()=>{document.querySelector("#container").scrollTo(0,t)},1e3)},beforeRouteLeave(e,t,a){let o={tag:"index",top:document.querySelector("#container").scrollTop};this.$store.commit("saveInfo",o),a()},methods:{...Object(i["c"])(["auth"])}},r=(a("8266"),a("6b0d")),d=a.n(r);const h=d()(l,[["render",s],["__scopeId","data-v-7a84c49c"]]);t["default"]=h},dc41:function(e,t,a){"use strict";a.r(t);a("14d9");var o=a("7a23");const c=e=>(Object(o["pushScopeId"])("data-v-b9673ccc"),e=e(),Object(o["popScopeId"])(),e),s={key:0},i={class:"head"},n={class:"price"},l={class:"symbol"},r={class:"number"},d={class:"slash"},h={class:"spec"},b=["innerHTML"],p=c(()=>Object(o["createElementVNode"])("div",{class:"group"},null,-1)),u=["innerHTML"],O={style:{"text-align":"right"}},j=c(()=>Object(o["createElementVNode"])("p",null," ",-1));function m(e,t,a,c,m,f){const v=Object(o["resolveComponent"])("van-image"),y=Object(o["resolveComponent"])("van-tag"),C=Object(o["resolveComponent"])("van-cell"),g=Object(o["resolveComponent"])("van-stepper"),k=Object(o["resolveComponent"])("van-field"),w=Object(o["resolveComponent"])("van-button"),V=Object(o["resolveComponent"])("van-form"),N=Object(o["resolveComponent"])("van-action-sheet"),S=Object(o["resolveComponent"])("van-action-bar-icon"),x=Object(o["resolveComponent"])("van-action-bar-button"),_=Object(o["resolveComponent"])("van-action-bar"),E=Object(o["resolveComponent"])("van-empty"),B=Object(o["resolveComponent"])("pay"),D=Object(o["resolveComponent"])("BaseLayout");return Object(o["openBlock"])(),Object(o["createBlock"])(D,{title:"商品详情",bg:"#EEE",navbar:"auto"},{default:Object(o["withCtx"])(()=>[m.detail.intro?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",s,[Object(o["createVNode"])(v,{src:m.detail.cover,width:"100%",fit:"contain"},null,8,["src"]),Object(o["createElementVNode"])("div",i,[Object(o["createVNode"])(C,{class:"title",border:!1},{title:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(m.detail.title),1)]),label:Object(o["withCtx"])(()=>[Object(o["withDirectives"])(Object(o["createVNode"])(y,{type:"danger"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("推荐")]),_:1},512),[[o["vShow"],m.detail.isTop]]),Object(o["createTextVNode"])("   "+Object(o["toDisplayString"])(m.detail.feature),1)]),_:1}),Object(o["createVNode"])(C,{center:"",border:!1},Object(o["createSlots"])({title:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",n,[Object(o["createElementVNode"])("span",l,[Object(o["createTextVNode"])("￥"),Object(o["createElementVNode"])("span",r,Object(o["toDisplayString"])(m.detail.price),1),Object(o["createTextVNode"])(" 起")]),Object(o["createElementVNode"])("span",d,"￥"+Object(o["toDisplayString"])(m.detail.price_market),1)])]),_:2},[m.detail.sales_supplier>0?{name:"extra",fn:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("已售出："+Object(o["toDisplayString"])(m.detail.sales_supplier),1)]),key:"0"}:void 0]),1024)]),Object(o["createElementVNode"])("div",h,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(m.state.spec,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])(C,{key:t,title:e.name,border:!1},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("span",{innerHTML:e.value},null,8,b)]),_:2},1032,["title"]))),128))]),p,Object(o["createElementVNode"])("div",{class:"intro",innerHTML:f.strip(m.detail.intro)},null,8,u),Object(o["createVNode"])(N,{show:m.state.popup,"onUpdate:show":t[1]||(t[1]=e=>m.state.popup=e),style:{minHeight:"90vh",backgroundColor:"#EEE"},title:"填写订单信息"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(V,{class:"form",onSubmit:f.checkout},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(C,{title:m.detail.title,border:!1},{label:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",O,Object(o["toDisplayString"])(m.detail.appointment),1)]),_:1},8,["title"]),Object(o["createVNode"])(C,{title:"数量选择",border:!1},{label:Object(o["withCtx"])(()=>[Object(o["createVNode"])(k,{name:"num",label:"￥ "+m.detail.price+" / 份","input-align":"right"},{input:Object(o["withCtx"])(()=>[Object(o["createVNode"])(g,{name:"num",modelValue:m.form.num,"onUpdate:modelValue":t[0]||(t[0]=e=>m.form.num=e),min:1,max:10},null,8,["modelValue"]),Object(o["createTextVNode"])("  份 ")]),_:1},8,["label"])]),_:1}),Object(o["createVNode"])(C,{title:"联系信息",border:!1},{label:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(f.cust,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])(k,{key:t,name:t,modelValue:m.form[t],"onUpdate:modelValue":e=>m.form[t]=e,type:e.type,label:e.name+"：",rules:e.rules,"label-align":"right",border:!1,"show-error":!0},null,8,["name","modelValue","onUpdate:modelValue","type","label","rules"]))),128))]),_:1}),j,Object(o["createVNode"])(w,{class:"btn",type:"danger",block:"",round:"","native-type":"submit"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("确认购买")]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["show"]),Object(o["createVNode"])(_,{class:"bar"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(S,{icon:"wap-home-o",text:"首页",onClick:t[2]||(t[2]=t=>e.$router.push("/"))}),Object(o["createVNode"])(S,{icon:"balance-list-o",text:"订单",onClick:t[3]||(t[3]=t=>e.$router.push("order"))}),Object(o["createVNode"])(x,{type:"danger",disabled:0!=m.state.status,text:f.info,onClick:t[4]||(t[4]=e=>m.state.popup=!0)},null,8,["disabled","text"])]),_:1})])):(Object(o["openBlock"])(),Object(o["createBlock"])(E,{key:1,description:f.info},null,8,["description"])),Object(o["createVNode"])(B,Object(o["mergeProps"])(m.state.payData,{show:m.state.payShow,"onUpdate:show":t[5]||(t[5]=e=>m.state.payShow=e),onOnFinish:f.handlePay}),null,16,["show","onOnFinish"])]),_:1})}var f=a("4003"),v=(a("1a56"),a("6b0d")),y=a.n(v);const C=y()(f["a"],[["render",m],["__scopeId","data-v-b9673ccc"]]);t["default"]=C},e2c9:function(e,t,a){"use strict";a.r(t);a("14d9");var o=a("7a23");const c={class:"item"},s={class:"detail"},i={class:"amount"},n={class:"action"},l=["onClick"],r={class:"popup"},d={key:1,class:"text"},h={class:"indicator"},b=["innerHTML"];function p(e,t,a,p,u,O){const j=Object(o["resolveComponent"])("van-icon"),m=Object(o["resolveComponent"])("van-search"),f=Object(o["resolveComponent"])("van-sticky"),v=Object(o["resolveComponent"])("van-tag"),y=Object(o["resolveComponent"])("van-cell"),C=Object(o["resolveComponent"])("van-button"),g=Object(o["resolveComponent"])("van-empty"),k=Object(o["resolveComponent"])("van-list"),w=Object(o["resolveComponent"])("van-pull-refresh"),V=Object(o["resolveComponent"])("van-swipe-item"),N=Object(o["resolveComponent"])("van-swipe"),S=Object(o["resolveComponent"])("van-action-sheet"),x=Object(o["resolveComponent"])("van-picker"),_=Object(o["resolveComponent"])("van-popup"),E=Object(o["resolveComponent"])("pay"),B=Object(o["resolveComponent"])("BaseLayout");return Object(o["openBlock"])(),Object(o["createBlock"])(B,{title:"荟玩订单",navbar:"show",height:"0"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(f,{"offset-top":45},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(m,{modelValue:u.state.keyword,"onUpdate:modelValue":t[1]||(t[1]=e=>u.state.keyword=e),placeholder:"搜索订单",background:"#EEE",clearable:"",onSearch:O.onRefresh,onClear:O.onRefresh},{left:Object(o["withCtx"])(()=>[Object(o["createVNode"])(j,{class:"select",name:"arrow-down",onClick:t[0]||(t[0]=e=>u.state.picker=!0)},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("  "+Object(o["toDisplayString"])(O.btn),1)]),_:1})]),_:1},8,["modelValue","onSearch","onClear"])]),_:1}),Object(o["createVNode"])(w,{modelValue:u.state.refreshing,"onUpdate:modelValue":t[3]||(t[3]=e=>u.state.refreshing=e),onRefresh:O.onRefresh},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(k,{class:"list",loading:u.state.loading,"onUpdate:loading":t[2]||(t[2]=e=>u.state.loading=e),finished:u.state.finished,"loading-text":"正在请求数据 ...","finished-text":"-- 没有了 --","immediate-check":!1,onLoad:O.onLoad},{default:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(u.state.list,(t,a)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:a},[Object(o["createVNode"])(v,{class:"dt"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.orderDate),1)]),_:2},1024),Object(o["createElementVNode"])("div",c,[Object(o["createVNode"])(y,{title:"#"+t.orderId,onClick:a=>e.$copy(t.orderId)},{extra:Object(o["withCtx"])(()=>[Object(o["createVNode"])(j,{class:"status",name:O.getStatus(t).icon,color:O.getStatus(t).color},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(O.getStatus(t).name),1)]),_:2},1032,["name","color"])]),_:2},1032,["title","onClick"]),Object(o["createVNode"])(y,{title:t.productName,onClick:a=>e.$router.push("item?id="+t.productNo)},{extra:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("  "),Object(o["createElementVNode"])("b",null,"x "+Object(o["toDisplayString"])(t.num),1)]),_:2},1032,["title","onClick"]),Object(o["createElementVNode"])("div",s,[Object(o["createElementVNode"])("span",i,"￥ "+Object(o["toDisplayString"])(t.orderMoney),1),Object(o["withDirectives"])(Object(o["createElementVNode"])("span",n,[Object(o["createVNode"])(C,{type:"success",size:"mini",plain:"",onClick:e=>O.onPay(t)},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("立即付款")]),_:2},1032,["onClick"]),Object(o["createVNode"])(C,{type:"danger",size:"mini",plain:"",onClick:e=>O.onCancel(t)},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("关闭订单")]),_:2},1032,["onClick"])],512),[[o["vShow"],1==t.orderState]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("span",{class:"view",onClick:e=>O.onView(t)},[Object(o["createVNode"])(j,{name:u.state.popup?"eye-o":"closed-eye"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" 查看详情")]),_:1},8,["name"])],8,l),[[o["vShow"],/(2|4)/.test(t.orderState)]])])])]))),128)),Object(o["withDirectives"])(Object(o["createVNode"])(g,{style:{width:"100%"}},null,512),[[o["vShow"],0==u.state.list.length]])]),_:1},8,["loading","finished","onLoad"])]),_:1},8,["modelValue","onRefresh"]),Object(o["createVNode"])(S,{show:u.state.popup,"onUpdate:show":t[5]||(t[5]=e=>u.state.popup=e),title:"订单详情"},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",r,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(u.fields,(e,t)=>Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])(y,{key:t,title:e,value:u.state.detail[t].toString()},null,8,["title","value"])),[[o["vShow"],u.state.detail[t]&&u.state.detail[t].length>0]])),128)),Object(o["createVNode"])(y,{title:"订购 / 验证数量",value:u.state.detail.num+" / "+u.state.detail.finishNum},null,8,["value"]),Object(o["createVNode"])(N,{class:"swipe"},{indicator:Object(o["withCtx"])(({active:e})=>[Object(o["createElementVNode"])("div",h,Object(o["toDisplayString"])(e+1)+" / "+Object(o["toDisplayString"])(Object.keys(u.state.cards).length),1)]),default:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(u.state.cards,(t,a)=>(Object(o["openBlock"])(),Object(o["createBlock"])(V,{class:"card",key:a,style:Object(o["normalizeStyle"])({borderColor:t.color})},{default:Object(o["withCtx"])(()=>[1==t.codeType?(Object(o["openBlock"])(),Object(o["createBlock"])(j,{key:0,class:"icon",name:t.codeUrl},null,8,["name"])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",d,[Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(0==t.codeType?"code":"link")},Object(o["toDisplayString"])(t.codeUrl),3),Object(o["createVNode"])(j,{class:"tool",name:"more-o",onClick:a=>e.$copy(t.codeUrl)},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" 点我复制")]),_:2},1032,["onClick"])]))]),_:2},1032,["style"]))),128))]),_:1}),Object(o["createElementVNode"])("div",{class:"notice",innerHTML:u.state.detail.sendContent,onClick:t[4]||(t[4]=t=>e.$copy(u.state.detail.sendContent))},null,8,b)])]),_:1},8,["show"]),Object(o["createVNode"])(_,{show:u.state.picker,"onUpdate:show":t[7]||(t[7]=e=>u.state.picker=e),round:"",position:"bottom"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(x,{columns:u.status,"columns-field-names":{text:"name"},"cancel-button-text":"查看所有订单",onCancel:t[6]||(t[6]=e=>O.onChange(null)),onConfirm:O.onChange},null,8,["columns","onConfirm"])]),_:1},8,["show"]),Object(o["createVNode"])(E,Object(o["mergeProps"])(u.state.payData,{show:u.state.payShow,"onUpdate:show":t[8]||(t[8]=e=>u.state.payShow=e),onOnFinish:O.onRefresh}),null,16,["show","onOnFinish"])]),_:1})}var u=a("c9e1"),O=(a("7636"),a("6b0d")),j=a.n(O);const m=j()(u["a"],[["render",p],["__scopeId","data-v-192196f4"]]);t["default"]=m},eb09:function(e,t,a){"use strict";a.r(t);var o=a("7a23");const c=e=>(Object(o["pushScopeId"])("data-v-8de0c558"),e=e(),Object(o["popScopeId"])(),e),s={class:"box"},i=c(()=>Object(o["createElementVNode"])("div",{class:"dt"},"按设备筛选",-1)),n=c(()=>Object(o["createElementVNode"])("div",null,"全部",-1)),l=c(()=>Object(o["createElementVNode"])("br",null,null,-1)),r=c(()=>Object(o["createElementVNode"])("div",{class:"dt"},"按日期筛选",-1)),d={class:"type"},h={class:"list"},b={class:"fee"},p=c(()=>Object(o["createElementVNode"])("span",{class:"symbol"},"￥",-1)),u={class:"popup"},O={class:"title"},j={class:"qrcode"},m=c(()=>Object(o["createElementVNode"])("div",{class:"remark"},"注：商家只能修改表单后四项，其他项请联系我司商务",-1)),f=["innerHTML"];function v(e,t,a,c,v,y){const C=Object(o["resolveComponent"])("van-icon"),g=Object(o["resolveComponent"])("van-cell"),k=Object(o["resolveComponent"])("van-switch"),w=Object(o["resolveComponent"])("van-empty"),V=Object(o["resolveComponent"])("van-calendar"),N=Object(o["resolveComponent"])("van-code"),S=Object(o["resolveComponent"])("van-field"),x=Object(o["resolveComponent"])("van-stepper"),_=Object(o["resolveComponent"])("van-button"),E=Object(o["resolveComponent"])("van-popup"),B=Object(o["resolveComponent"])("van-password-input"),D=Object(o["resolveComponent"])("van-number-keyboard"),T=Object(o["resolveComponent"])("BaseLayout");return Object(o["openBlock"])(),Object(o["createBlock"])(T,{title:"商家账单",bg:"linear-gradient(180deg, #EEE, #F9F9F9 40%, #F9F9F9)",height:"0",noback:""},{more:Object(o["withCtx"])(()=>[Object(o["createVNode"])(C,{name:"replay",size:"16",color:"#666",onClick:y.query},null,8,["onClick"])]),default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",s,[Object(o["createVNode"])(g,{class:"filter",icon:"filter-o",border:!1,onClick:t[1]||(t[1]=e=>v.state.show=!v.state.show)},{title:Object(o["withCtx"])(()=>[i]),value:Object(o["withCtx"])(()=>[Object(o["createVNode"])(C,{name:0==v.id?"checked":"circle",size:"18",color:"#F66",onClick:t[0]||(t[0]=Object(o["withModifiers"])(e=>v.id=0,["stop"]))},null,8,["name"]),n]),label:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(y.info),1)]),_:1}),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(v.state.device,(e,a)=>Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])(g,{key:a,class:Object(o["normalizeClass"])({device:!0,active:v.id==e.id}),title:e.name||e.code,border:!1,onClick:t=>y.choose(e.id)},{label:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" 编号："+Object(o["toDisplayString"])(e.code),1),l,Object(o["createTextVNode"])("收款方式："+Object(o["toDisplayString"])(y.getName(e)),1)]),value:Object(o["withCtx"])(()=>[Object(o["createVNode"])(C,{class:"icon",name:v.id==e.id?"checked":"circle",size:"18"},null,8,["name"])]),extra:Object(o["withCtx"])(()=>[Object(o["withDirectives"])(Object(o["createElementVNode"])("div",{class:"extra",onClick:t[2]||(t[2]=e=>v.state.popup1=!0)},[Object(o["createTextVNode"])("设置 "),Object(o["createVNode"])(C,{name:"arrow-down",size:"16"})],512),[[o["vShow"],0==v.state.password.length]])]),_:2},1032,["class","title","onClick"])),[[o["vShow"],v.state.show]])),128)),Object(o["createVNode"])(g,{class:"filter",icon:"calendar-o",label:y.format(v.date),border:!1,onClick:t[4]||(t[4]=Object(o["withModifiers"])(e=>v.state.calendar=!0,["stop"]))},{title:Object(o["withCtx"])(()=>[r]),value:Object(o["withCtx"])(()=>[Object(o["createVNode"])(k,{modelValue:v.state.type,"onUpdate:modelValue":t[3]||(t[3]=e=>v.state.type=e),size:"14"},null,8,["modelValue"]),Object(o["createElementVNode"])("div",d,Object(o["toDisplayString"])(v.state.type?"单":"多")+"日",1)]),_:1},8,["label"]),Object(o["createVNode"])(g,{icon:"chart-trending-o"},{title:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("共收款 "+Object(o["toDisplayString"])(v.state.order.total||0)+" 笔，合计 "+Object(o["toDisplayString"])(v.state.order.amount||0)+" 元",1)]),_:1}),Object(o["createElementVNode"])("div",h,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(v.state.order.list,(t,a)=>(Object(o["openBlock"])(),Object(o["createBlock"])(g,{key:a,title:t.dt,label:t.remark,onClick:a=>e.$copy(t.remark)},{value:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",b,[p,Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.fee),1)])]),_:2},1032,["title","label","onClick"]))),128)),Object(o["withDirectives"])(Object(o["createVNode"])(w,null,{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("暂无记录")]),_:1},512),[[o["vShow"],!v.state.order||0==v.state.order.total]])])]),Object(o["createVNode"])(V,{show:v.state.calendar,"onUpdate:show":t[5]||(t[5]=e=>v.state.calendar=e),type:v.state.type?"single":"range","max-range":366,"min-date":new Date("2022/01/01"),"max-date":new Date,"default-date":v.date,"show-confirm":!1,onConfirm:t[6]||(t[6]=e=>v.date=e)},null,8,["show","type","min-date","max-date","default-date"]),Object(o["createVNode"])(E,{show:v.state.popup1,"onUpdate:show":t[15]||(t[15]=e=>v.state.popup1=e),position:"top",style:{height:"100%"},"close-on-popstate":!0,closeable:""},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",u,[Object(o["createElementVNode"])("div",O,"收银台编号："+Object(o["toDisplayString"])(v.field.code||a.code),1),Object(o["createElementVNode"])("div",j,[Object(o["createVNode"])(N,{type:"qrimage",value:y.getCode("pay"),width:"100",margin:"0"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("收款码")]),_:1},8,["value"]),Object(o["createVNode"])(N,{type:"qrimage",value:y.getCode("biz"),width:"100",margin:"0"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("管理码")]),_:1},8,["value"])]),Object(o["createVNode"])(S,{modelValue:v.field.uid,"onUpdate:modelValue":t[7]||(t[7]=e=>v.field.uid=e),type:"text",label:"绑定店长",placeholder:"用户 UID","input-align":"right"},null,8,["modelValue"]),Object(o["createVNode"])(g,{center:"",title:"会员折扣"},{"right-icon":Object(o["withCtx"])(()=>[Object(o["createVNode"])(x,{modelValue:v.field.discount,"onUpdate:modelValue":t[8]||(t[8]=e=>v.field.discount=e),min:20,max:120},null,8,["modelValue"])]),_:1}),Object(o["createVNode"])(S,{modelValue:v.field.box,"onUpdate:modelValue":t[9]||(t[9]=e=>v.field.box=e),type:"number",maxlength:"15","show-word-limit":"",label:"到账提示音箱",placeholder:"机器 IMEI","input-align":"right"},null,8,["modelValue"]),Object(o["createVNode"])(S,{modelValue:v.field.pos,"onUpdate:modelValue":t[10]||(t[10]=e=>v.field.pos=e),type:"number",maxlength:"15","show-word-limit":"",label:"POS扫码收款",placeholder:"机器 IMEI","input-align":"right"},null,8,["modelValue"]),Object(o["createVNode"])(S,{modelValue:v.field.mobile,"onUpdate:modelValue":t[11]||(t[11]=e=>v.field.mobile=e),type:"number",maxlength:"11","show-word-limit":"",label:"手机扫码收款",placeholder:"手机号","input-align":"right"},null,8,["modelValue"]),Object(o["createVNode"])(S,{modelValue:v.field.pwd,"onUpdate:modelValue":t[12]||(t[12]=e=>v.field.pwd=e),type:"digit",maxlength:"6","show-word-limit":"",label:"授权管理密码",placeholder:"进入本页面的密码","input-align":"right"},null,8,["modelValue"]),Object(o["createVNode"])(S,{modelValue:v.field.name,"onUpdate:modelValue":t[13]||(t[13]=e=>v.field.name=e),type:"text",label:"名称",placeholder:"收银台名称","input-align":"right"},null,8,["modelValue"]),Object(o["createVNode"])(S,{modelValue:v.field.remark,"onUpdate:modelValue":t[14]||(t[14]=e=>v.field.remark=e),type:"textarea",rows:"1",autosize:"",label:"备注","input-align":"right",placeholder:"便于区分对账，可以不填"},null,8,["modelValue"]),m,Object(o["createVNode"])(_,{type:"primary",class:"bind",block:"",round:"",onClick:y.bind},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("绑定 / 修改")]),_:1},8,["onClick"])])]),_:1},8,["show"]),Object(o["createVNode"])(E,{show:v.state.popup2,"onUpdate:show":t[17]||(t[17]=e=>v.state.popup2=e),position:"bottom",overlay:!1,style:{height:"calc(100vh - 40px)",background:"#EEE"},"close-on-popstate":!0,"close-on-click-overlay":!1,closeable:!1},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(B,{info:"请输入管理密码",gutter:10,style:{margin:"60px 20px"},value:v.state.password},null,8,["value"]),Object(o["createVNode"])(D,{modelValue:v.state.password,"onUpdate:modelValue":t[16]||(t[16]=e=>v.state.password=e),show:!0,theme:"custom","close-button-text":"进入","safe-area-inset-bottom":!1,onClose:y.init},null,8,["modelValue","onClose"])]),_:1},8,["show"]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",{class:"watermark",innerHTML:a.code+" / "+e.uid+" / "+v.now},null,8,f),[[o["vShow"],!v.state.calendar&&!v.state.popup1&&!v.state.popup2]])]),_:1})}var y=a("0a9c"),C=(a("6c9e"),a("6b0d")),g=a.n(C);const k=g()(y["a"],[["render",v],["__scopeId","data-v-8de0c558"]]);t["default"]=k},ebd6:function(e,t,a){},efdb:function(e,t,a){"use strict";a("7a40")},f0f4:function(e,t,a){}}]);