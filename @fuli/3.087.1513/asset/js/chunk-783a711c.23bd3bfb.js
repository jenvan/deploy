(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-783a711c"],{"0b05":function(t,e,a){"use strict";a.r(e);a("b0c0"),a("b64b"),a("ac1f"),a("5319");var n=a("7a23"),c=Object(n["X"])("data-v-1746a7ba");Object(n["D"])("data-v-1746a7ba");var i={class:"box"},s={class:"nav"},r={key:0,class:"head"},o={class:"name1"},u={key:1},l={class:"name2"},d={class:"tab"},b={key:0,class:"panel"},j=Object(n["k"])("div",{class:"title"},"项目",-1),O={class:"chooser"},h=Object(n["k"])("div",{class:"title"},"价格",-1),p={class:"chooser"},f={class:"item"},v={class:"sale"},k={class:"face"},g={class:"title"},y={class:"param"};Object(n["B"])();var m=c((function(t,e,a,m,C,w){var I=Object(n["I"])("van-icon"),_=Object(n["I"])("van-image"),S=Object(n["I"])("van-tab"),A=Object(n["I"])("van-tabs"),$=Object(n["I"])("van-empty"),M=Object(n["I"])("van-field"),U=Object(n["I"])("van-stepper"),x=Object(n["I"])("van-cell"),L=Object(n["I"])("van-action-bar-icon"),V=Object(n["I"])("van-action-bar-button"),D=Object(n["I"])("van-action-bar"),Q=Object(n["I"])("van-popup"),F=Object(n["I"])("pay"),T=Object(n["I"])("BaseLayout");return Object(n["A"])(),Object(n["g"])(T,{title:C.state.title,height:"0"},{default:c((function(){return[Object(n["k"])("div",i,[Object(n["k"])("div",s,["coupon"!=a.action?(Object(n["A"])(),Object(n["g"])("div",r,[Object(n["k"])(I,{class:"icon",name:C.state.topCat.icon||"vip-card",size:"36"},null,8,["name"]),Object(n["k"])("div",o,Object(n["M"])(C.state.topCat.name),1)])):Object(n["U"])((Object(n["A"])(),Object(n["g"])("div",u,[Object(n["k"])(_,{src:C.state.topCat.icon},null,8,["src"]),Object(n["k"])("div",l,Object(n["M"])(C.state.topCat.name),1)],512)),[[n["Q"],!C.state.subCat||0==Object.keys(C.state.subCat).length]]),C.state.subCat&&Object.keys(C.state.subCat).length>0?(Object(n["A"])(),Object(n["g"])(A,{key:2,class:["tabs",a.action],active:C.state.active,"onUpdate:active":e[1]||(e[1]=function(t){return C.state.active=t}),"swipe-threshold":3,animated:"",swipeable:"",onChange:w.handleChange},{default:c((function(){return[(Object(n["A"])(!0),Object(n["g"])(n["a"],null,Object(n["G"])(C.state.subCat,(function(t,e){return Object(n["A"])(),Object(n["g"])(S,{key:e,name:t.id},{title:c((function(){return[Object(n["k"])("div",d,[Object(n["k"])(I,{name:t.icon,size:"36"},null,8,["name"]),Object(n["j"])(Object(n["M"])(t.name),1)])]})),_:2},1032,["name"])})),128))]})),_:1},8,["class","active","onChange"])):Object(n["h"])("",!0)]),Object.keys(C.state.spu).length>0?(Object(n["A"])(),Object(n["g"])("div",b,[j,Object(n["k"])("div",O,[(Object(n["A"])(!0),Object(n["g"])(n["a"],null,Object(n["G"])(C.state.spu,(function(t,e){return Object(n["A"])(),Object(n["g"])("div",{class:["spu",{active:C.state.id==t.id}],key:e,onClick:function(e){return w.handleChoose(t)}},Object(n["M"])(t.title),11,["onClick"])})),128))]),h,Object(n["k"])("div",p,[(Object(n["A"])(!0),Object(n["g"])(n["a"],null,Object(n["G"])(C.state.sku,(function(t,e){return Object(n["U"])((Object(n["A"])(),Object(n["g"])("div",{class:["sku",{more:Object.keys(C.state.sku).length>3,active:C.state.api==e}],key:e,onClick:function(t){return C.state.api=e}},[Object(n["k"])("div",f,Object(n["M"])(t.name),1),Object(n["k"])("div",v,"￥"+Object(n["M"])(t.sale_price),1),Object(n["k"])("div",k,"官方价：￥"+Object(n["M"])(t.face_price.replace(".00","")),1)],10,["onClick"])),[[n["Q"],t.stock>0]])})),128))]),Object(n["U"])(Object(n["k"])("div",g,"描述",512),[[n["Q"],C.state.intro]]),Object(n["U"])(Object(n["k"])("div",{class:"intro",innerHTML:t.$safeHTML(C.state.intro)},null,8,["innerHTML"]),[[n["Q"],C.state.intro]])])):(Object(n["A"])(),Object(n["g"])($,{key:1,description:"暂无项目"}))]),Object(n["k"])(D,{class:"bar"},{default:c((function(){return[Object(n["U"])(Object(n["k"])("div",y,[Object(n["U"])(Object(n["k"])(M,{modelValue:C.state.account,"onUpdate:modelValue":e[2]||(e[2]=function(t){return C.state.account=t}),border:!1,type:"text",placeholder:"请填写充值账号（手机号）"},null,8,["modelValue"]),[[n["Q"],0==C.state.type&&C.state.api.length>0]]),Object(n["U"])(Object(n["k"])(x,{border:!1,title:"购买数量"},{value:c((function(){return[Object(n["k"])(U,{modelValue:C.state.entity,"onUpdate:modelValue":e[3]||(e[3]=function(t){return C.state.entity=t}),theme:"round","input-width":"42","button-size":"24","disable-input":!1,min:"1",max:"100",integer:""},null,8,["modelValue"])]})),_:1},512),[[n["Q"],1==C.state.type&&C.state.api.length>0]])],512),[[n["Q"],C.state.api.length>0]]),Object(n["k"])(L,{icon:"chat-o",text:"客服",onClick:e[4]||(e[4]=function(t){return C.state.popup=!0})}),Object(n["k"])(L,{icon:"cash-on-deliver",text:"订单",onClick:e[5]||(e[5]=function(e){return t.$router.push("/digital/order")})}),Object(n["k"])(V,{type:"danger",text:"立即购买",onClick:w.handleSubmit},null,8,["onClick"])]})),_:1}),Object(n["k"])(Q,{show:C.state.popup,"onUpdate:show":e[6]||(e[6]=function(t){return C.state.popup=t}),position:"top",style:{height:"50%",padding:"20px"}},{default:c((function(){return[Object(n["k"])("div",{class:"contact",innerHTML:t.config.contact},null,8,["innerHTML"])]})),_:1},8,["show"]),Object(n["k"])(F,Object(n["r"])(C.state.payData,{show:C.state.payShow,"onUpdate:show":e[7]||(e[7]=function(t){return C.state.payShow=t}),onOnFinish:w.handlePay}),null,16,["show","onOnFinish"])]})),_:1},8,["title"])})),C=a("ec39"),w=(a("c71f"),a("d959")),I=a.n(w);const _=I()(C["a"],[["render",m],["__scopeId","data-v-1746a7ba"]]);e["default"]=_},"40fe":function(t,e,a){"use strict";(function(t){var n=a("5530"),c=(a("a9e3"),a("7a23")),i=a("5502"),s=a("2824"),r=a("a6e6");e["a"]={components:{BaseLayout:s["a"],Pay:r["default"]},props:{direct:{type:[String,Number],default:0},digital:{type:[String,Number],default:0},aid:{type:[String,Number],default:0}},data:function(){var t=Object(c["E"])({addr:{},list:[],number:1,amount:0,pickCard:!1,digiCard:!1,payData:{},payShow:!1});return{state:t}},created:function(){var e=this;this.state.digiCard=!t.isEmpty(this.digital)&&1==parseInt(this.digital),this.$http.get("/mall/addresslist").then((function(a){for(var n in a)if(0==e.aid&&2==a[n].status||a[n].id==e.aid){e.state.addr=a[n];break}t.isEmpty(e.state.addr)&&!t.isEmpty(a)&&(e.state.addr=a[0])})),this.$http.get("/mall/cartlist?status="+(parseInt(this.direct)+1)).then((function(t){e.state.list=t;var a=0;for(var n in t)a+=e.state.list[n].price*e.state.list[n].num;e.state.amount=a}))},computed:Object(n["a"])({target:function(){return escape(this.$route.fullPath)},total:function(){return this.state.pickCard?this.state.amount*this.state.number:this.state.amount}},Object(i["d"])(["profile"])),methods:{buy:function(){var e=this;if(t.isEmpty(this.state.addr)&&!this.state.pickCard&&!this.state.digiCard)return this.$toast("请先选择收货地址");var a=0;this.state.pickCard&&(a=this.state.number),this.state.digiCard&&(a=-1),this.$http.post("/mall/checkout?aid="+(this.state.pickCard||this.state.digiCard?0:this.state.addr.id)+"&card="+a+"&direct="+this.direct).then((function(t){e.state.payData=Object(n["a"])(Object(n["a"])({},t),{},{json:JSON.stringify(t)}),e.state.payShow=!0}))},handlePay:function(t){var e=this;this.state.payShow=!1,this.$dialog.alert({title:"订单支付"+(t?"成功":"失败"),message:"请在“我的订单”中查看详细情况",theme:"round-button"}).then((function(){e.$router.push("/my/order")}))}}}}).call(this,a("81b0"))},"69fb":function(t,e,a){"use strict";a.r(e);a("b0c0"),a("b64b"),a("ac1f"),a("5319");var n=a("7a23"),c=Object(n["X"])("data-v-afdd075e");Object(n["D"])("data-v-afdd075e");var i=Object(n["j"])("已下单"),s=Object(n["j"])("已付款"),r=Object(n["j"])("已发货"),o=Object(n["j"])("已签收"),u={key:0},l={class:"wait"},d=Object(n["k"])("br",null,null,-1),b=Object(n["j"])("卡密尚未发货 "),j={class:"card"},O={class:"tool"},h=Object(n["j"])(" 复制卡密"),p=Object(n["j"])("   "),f=Object(n["j"])(" 查看卡片"),v={class:"van-multi-ellipsis--l2"},k=Object(n["k"])("br",null,null,-1),g=Object(n["j"])("长按图片保存到手机或分享给好友");Object(n["B"])();var y=c((function(t,e,a,y,m,C){var w=Object(n["I"])("van-step"),I=Object(n["I"])("van-steps"),_=Object(n["I"])("van-cell"),S=Object(n["I"])("van-icon"),A=Object(n["I"])("van-swipe-item"),$=Object(n["I"])("van-swipe"),M=Object(n["I"])("van-collapse-item"),U=Object(n["I"])("van-collapse"),x=Object(n["I"])("van-divider"),L=Object(n["I"])("van-action-bar-icon"),V=Object(n["I"])("van-action-bar-button"),D=Object(n["I"])("van-action-bar"),Q=Object(n["I"])("van-image"),F=Object(n["I"])("van-popup"),T=Object(n["I"])("pay"),P=Object(n["I"])("BaseLayout");return Object(n["A"])(),Object(n["g"])(P,{title:"订单详情",subtitle:"# "+a.id},{default:c((function(){return[Object(n["U"])(Object(n["k"])(I,{class:"step",active:y.status},{default:c((function(){return[Object(n["k"])(w,null,{default:c((function(){return[i]})),_:1}),Object(n["k"])(w,null,{default:c((function(){return[s]})),_:1}),Object(n["k"])(w,null,{default:c((function(){return[r]})),_:1}),Object(n["k"])(w,null,{default:c((function(){return[o]})),_:1})]})),_:1},8,["active"]),[[n["Q"],y.status<4]]),y.state.order.channel>0?(Object(n["A"])(),Object(n["g"])(_,{key:0,title:t.channel[y.state.order.channel]["name"]+"单号",value:y.state.order.extra,border:!1,onClick:e[1]||(e[1]=function(e){return t.$copy(y.state.order.extra)})},null,8,["title","value"])):Object(n["h"])("",!0),Object(n["k"])(U,{class:"bill",modelValue:y.unfold,"onUpdate:modelValue":e[2]||(e[2]=function(t){return y.unfold=t})},{default:c((function(){return[Object(n["k"])(M,{name:"0",title:"收货信息",value:0==y.state.order.card?"物流派送":y.state.order.card<0?"电子卡密":"提货卡"},{default:c((function(){return[0==y.state.order.card?(Object(n["A"])(),Object(n["g"])("div",u,[Object(n["k"])(_,null,{title:c((function(){return[Object(n["j"])(Object(n["M"])(y.state.order.consignee.name)+"（"+Object(n["M"])(y.state.order.consignee.mobile)+"）",1)]})),label:c((function(){return[Object(n["j"])(Object(n["M"])(y.state.order.consignee.province)+" "+Object(n["M"])(y.state.order.consignee.city)+" "+Object(n["M"])(y.state.order.consignee.county)+" "+Object(n["M"])(y.state.order.consignee.address),1)]})),_:1}),(Object(n["A"])(!0),Object(n["g"])(n["a"],null,Object(n["G"])(y.state.order.logistics,(function(e,c,i){return Object(n["A"])(),Object(n["g"])(_,{key:c,title:e.dt+(Object.keys(y.state.order.logistics).length>1?"（包裹 "+(i+1)+"）":""),label:e.msg,border:"","is-link":"",onClick:function(e){return t.$router.push("/my/order/track?id="+a.id+"&lid="+c)}},null,8,["title","label","onClick"])})),128))])):(Object(n["A"])(),Object(n["g"])($,{key:1,class:"swipe"},{indicator:c((function(t){var e=t.active;return[Object(n["U"])(Object(n["k"])("div",{class:"indicator"},Object(n["M"])(e+1)+" / "+Object(n["M"])(y.state.cards.length),513),[[n["Q"],y.state.cards.length>0]])]})),default:c((function(){return[Object(n["U"])(Object(n["k"])("div",l,[Object(n["k"])(S,{name:"card",size:"96"}),d,b],512),[[n["Q"],0==y.state.cards.length]]),(Object(n["A"])(!0),Object(n["g"])(n["a"],null,Object(n["G"])(y.state.cards,(function(t,e){return Object(n["A"])(),Object(n["g"])(A,{key:e,style:{background:t.bg}},{default:c((function(){return[Object(n["k"])("div",j,[Object(n["j"])(Object(n["M"])(y.state.order.card>0?"提货卡号：":"")+"**** ",1),Object(n["k"])("span",{innerHTML:t.token.substr(4).replace(/([\s|\|,]+)/gm,"<br>")},null,8,["innerHTML"])]),Object(n["k"])("div",O,[Object(n["k"])(S,{name:"more-o",onClick:function(e){return C.onFinish()&C.copy(t.token)}},{default:c((function(){return[h]})),_:2},1032,["onClick"]),p,Object(n["k"])(S,{name:"photo-o",onClick:function(e){return C.onFinish()&C.share(t.token,t.deadline)}},{default:c((function(){return[f]})),_:2},1032,["onClick"])]),Object(n["U"])(Object(n["k"])("div",{class:"deadline"}," 有效期至："+Object(n["M"])(t.deadline.substr(0,10)),513),[[n["Q"],t.deadline&&t.deadline.length>0]])]})),_:2},1032,["style"])})),128))]})),_:1}))]})),_:1},8,["value"]),Object(n["k"])(M,{name:"1",title:"商品信息",value:"共 "+(y.state.order.card<=0?y.state.order.total:y.state.order.card+" x "+y.state.order.total/y.state.order.card)+" 件"},{default:c((function(){return[(Object(n["A"])(!0),Object(n["g"])(n["a"],null,Object(n["G"])(y.state.order.detail,(function(t,e){return Object(n["A"])(),Object(n["g"])(_,{key:e,label:t.spec,style:{alignItems:"center"},onClick:function(e){return C.onView(t)}},{icon:c((function(){return[Object(n["k"])(S,{class:"img",name:t.image,size:"32"},null,8,["name"])]})),title:c((function(){return[Object(n["k"])("div",v,Object(n["M"])(t.title),1)]})),extra:c((function(){return[Object(n["j"])(" x"+Object(n["M"])(t.num),1)]})),_:2},1032,["label","onClick"])})),128))]})),_:1},8,["value"]),Object(n["k"])(M,{name:"2",title:"订单总额",value:y.state.order.amount+" 元"},{default:c((function(){return[Object(n["k"])(_,{title:"实付积分",value:y.state.order.point+" 分"},null,8,["value"]),Object(n["k"])(_,{title:"实付现金",value:y.state.order.cash+" 元"},null,8,["value"])]})),_:1},8,["value"]),Object(n["k"])(M,{name:"3",title:"交易状态"},{value:c((function(){return[Object(n["k"])("div",{style:{color:y.state.order.color}},Object(n["M"])(y.state.order.result),5)]})),default:c((function(){return[Object(n["k"])(_,{title:"创建时间",value:y.state.order.dt_create},null,8,["value"]),Object(n["k"])(_,{title:"付款时间",value:y.state.order.dt_pay},null,8,["value"]),Object(n["k"])(_,{title:"发货时间",value:y.state.order.dt_send},null,8,["value"]),Object(n["k"])(_,{title:"完成时间",value:y.state.order.dt_finish},null,8,["value"])]})),_:1})]})),_:1},8,["modelValue"]),Object(n["k"])(x,{style:{color:"#EEE"},onClick:e[3]||(e[3]=function(e){return t.$copy(a.id+" "+y.state.order.extra)})},{default:c((function(){return[Object(n["j"])("# "+Object(n["M"])(a.id)+" #",1)]})),_:1}),Object(n["k"])(D,null,{default:c((function(){return[Object(n["k"])(L,{icon:"chat-o",text:"客服",onClick:e[4]||(e[4]=function(t){return y.state.popup2=!0})}),0==y.state.order.status?(Object(n["A"])(),Object(n["g"])(V,{key:0,type:"warning",text:"关闭订单",onClick:C.onClose},null,8,["onClick"])):Object(n["h"])("",!0),0==y.state.order.status?(Object(n["A"])(),Object(n["g"])(V,{key:1,type:"primary",text:"立即付款",onClick:C.onPay},null,8,["onClick"])):Object(n["h"])("",!0),0==y.state.order.card&&2==y.state.order.status?(Object(n["A"])(),Object(n["g"])(V,{key:2,type:"success",text:"确认收货",onClick:C.onFinish},null,8,["onClick"])):Object(n["h"])("",!0),0==y.state.order.card&&y.state.order.status>0&&y.state.order.status<4?(Object(n["A"])(),Object(n["g"])(V,{key:3,type:"danger",text:"申请售后",onClick:C.onService},null,8,["onClick"])):Object(n["h"])("",!0)]})),_:1}),Object(n["k"])(F,{show:y.state.popup1,"onUpdate:show":e[5]||(e[5]=function(t){return y.state.popup1=t})},{default:c((function(){return[Object(n["k"])(Q,{class:"giftcard",src:y.state.giftcard,width:"300"},{default:c((function(){return[k,g]})),_:1},8,["src"])]})),_:1},8,["show"]),Object(n["k"])(F,{show:y.state.popup2,"onUpdate:show":e[6]||(e[6]=function(t){return y.state.popup2=t}),position:"top",style:{height:"50%",padding:"20px"}},{default:c((function(){return[Object(n["k"])("div",{class:"contact",innerHTML:t.config.contact},null,8,["innerHTML"])]})),_:1},8,["show"]),Object(n["k"])(T,Object(n["r"])(y.state.payData,{show:y.state.payShow,"onUpdate:show":e[7]||(e[7]=function(t){return y.state.payShow=t}),onOnFinish:C.handlePay}),null,16,["show","onOnFinish"])]})),_:1},8,["subtitle"])})),m=a("e74a"),C=(a("a49f"),a("d959")),w=a.n(C);const I=w()(m["a"],[["render",y],["__scopeId","data-v-afdd075e"]]);e["default"]=I},"80ce":function(t,e,a){},8266:function(t,e,a){"use strict";a("ec08")},8455:function(t,e,a){},"8f59":function(t,e,a){"use strict";a("80ce")},a49f:function(t,e,a){"use strict";a("8455")},bb93:function(t,e,a){},bc21:function(t,e,a){"use strict";a.r(e);a("b0c0");var n=a("7a23"),c=Object(n["X"])("data-v-488ebb78");Object(n["D"])("data-v-488ebb78");var i={class:"main"},s={key:0},r=Object(n["j"])(" ");Object(n["B"])();var o=c((function(t,e,a,o,u,l){var d=Object(n["I"])("van-switch"),b=Object(n["I"])("van-cell"),j=Object(n["I"])("van-stepper"),O=Object(n["I"])("van-card"),h=Object(n["I"])("van-submit-bar"),p=Object(n["I"])("pay"),f=Object(n["I"])("BaseLayout");return Object(n["A"])(),Object(n["g"])(f,{title:"确认订单"},{default:c((function(){return[Object(n["k"])("div",i,[u.state.digiCard?Object(n["h"])("",!0):(Object(n["A"])(),Object(n["g"])("div",s,[Object(n["k"])(b,{title:"生成提货卡",border:!1},{"right-icon":c((function(){return[r,Object(n["k"])(d,{modelValue:u.state.pickCard,"onUpdate:modelValue":e[1]||(e[1]=function(t){return u.state.pickCard=t}),size:"24"},null,8,["modelValue"])]})),_:1}),Object(n["U"])(Object(n["k"])(b,{title:"提货卡数量"},{"right-icon":c((function(){return[Object(n["k"])(j,{modelValue:u.state.number,"onUpdate:modelValue":e[2]||(e[2]=function(t){return u.state.number=t}),theme:"round","button-size":"22",max:9999},null,8,["modelValue"])]})),_:1},512),[[n["Q"],u.state.pickCard]]),Object(n["U"])(Object(n["k"])("div",null,[u.state.addr&&u.state.addr.name?(Object(n["A"])(),Object(n["g"])(b,{key:0,class:"card",size:"large",icon:"location",title:u.state.addr.name+" "+u.state.addr.mobile,label:u.state.addr.province+u.state.addr.city+u.state.addr.county+u.state.addr.address,to:"/my/address/choose?target="+l.target,"is-link":"",center:""},null,8,["title","label","to"])):(Object(n["A"])(),Object(n["g"])(b,{key:1,class:"card",size:"large",title:"新增收货地址",to:"/my/address/add?target="+l.target,"is-link":""},null,8,["to"]))],512),[[n["Q"],!u.state.pickCard]])])),(Object(n["A"])(!0),Object(n["g"])(n["a"],null,Object(n["G"])(u.state.list,(function(t,e){return Object(n["A"])(),Object(n["g"])(O,{class:"item",key:e,title:t.title,desc:t.spec,thumb:t.image,price:t.price,num:t.num},null,8,["title","desc","thumb","price","num"])})),128)),Object(n["k"])(h,{label:"总金额：","button-text":"结算",style:{bottom:"50px"},price:100*l.total,disabled:0==l.total,onSubmit:l.buy},null,8,["price","disabled","onSubmit"]),Object(n["k"])(p,Object(n["r"])(u.state.payData,{show:u.state.payShow,"onUpdate:show":e[3]||(e[3]=function(t){return u.state.payShow=t}),onOnFinish:l.handlePay}),null,16,["show","onOnFinish"])])]})),_:1})})),u=a("40fe"),l=(a("8f59"),a("d959")),d=a.n(l);const b=d()(u["a"],[["render",o],["__scopeId","data-v-488ebb78"]]);e["default"]=b},c71f:function(t,e,a){"use strict";a("bb93")},d504:function(t,e,a){"use strict";a.r(e);var n=a("7a23"),c=Object(n["X"])("data-v-7a84c49c");Object(n["D"])("data-v-7a84c49c");var i={key:0,class:"loading"},s=Object(n["j"])("正在登录中 ...");Object(n["B"])();var r=c((function(t,e,a,r,o,u){var l=Object(n["I"])("van-loading"),d=Object(n["I"])("van-empty"),b=Object(n["I"])("home");return a.code.length>0?(Object(n["A"])(),Object(n["g"])("div",i,[Object(n["U"])(Object(n["k"])(l,{size:"64",vertical:""},{default:c((function(){return[s]})),_:1},512),[[n["Q"],0==r.state.info.length]]),Object(n["U"])(Object(n["k"])(d,{image:"error"},{default:c((function(){return[Object(n["j"])(Object(n["M"])(r.state.info),1)]})),_:1},512),[[n["Q"],r.state.info.length>0]])])):(Object(n["A"])(),Object(n["g"])(b,{key:1,production:!0}))})),o=a("5530"),u=(a("ac1f"),a("5319"),a("5502")),l=a("bb51"),d={name:"Index",components:{Home:l["default"]},props:{code:{type:String,default:""},redirect:{type:String,default:"/"}},setup:function(){var t=Object(n["E"])({info:""});return{state:t}},created:function(){var t=this;this.code.length>0&&this.$http.get("/wechat/login?code="+this.code).then((function(e){t.auth(e),t.$router.replace(t.redirect)})).catch((function(e){996!=e.rtn&&(t.state.info=e.msg)}));var e=this.$store.state.scrollInfo,a=e&&"index"==e.tag?e.top:0;a>500&&setTimeout((function(){document.querySelector("#container").scrollTo(0,a)}),1e3)},beforeRouteLeave:function(t,e,a){var n={tag:"index",top:document.querySelector("#container").scrollTop};this.$store.commit("saveInfo",n),a()},methods:Object(o["a"])({},Object(u["c"])(["auth"]))},b=(a("8266"),a("d959")),j=a.n(b);const O=j()(d,[["render",r],["__scopeId","data-v-7a84c49c"]]);e["default"]=O},e74a:function(t,e,a){"use strict";(function(t){var n=a("53ca"),c=a("5530"),i=(a("a9e3"),a("7a23")),s=a("5502"),r=a("2824"),o=a("a6e6");e["a"]={components:{BaseLayout:r["a"],Pay:o["default"]},props:{id:{type:[String,Number],default:0}},setup:function(){var t=Object(i["E"])({order:{},cards:[],popup1:!1,giftcard:"",popup2:!1,payData:{},payShow:!1}),e=Object(i["F"])(0),a=Object(i["F"])(["0","1"]),n=Object(i["F"])(0);return{state:t,status:e,unfold:a,active:n}},created:function(){this.onLoad()},computed:Object(c["a"])({},Object(s["d"])(["channel","config"])),methods:{onLoad:function(){var e=this;this.state.cards=[],this.$http.post("/mall/orderDetail?id="+this.id).then((function(a){if(e.state.order=a,e.state.order.color=["#CCC","#666","#00C","#0C0","#C00"][a.status],e.state.order.result=["未付款","已付款","已发货","交易成功","交易关闭"][a.status],e.status=a.status,0!=a.card){for(var n in a.cards)a.cards[n].bg="rgb("+t.random(150,250)+","+t.random(150,250)+","+t.random(150,250)+")";e.state.cards=a.cards}a.channel>0&&a.status>0&&e.$http.get("/"+e.channel[a.channel]["type"]+"/orderUpdate?id="+e.id)}))},onView:function(t){var e="/mall/item?id="+t.spu;this.state.order.channel>0&&(e="/"+this.channel[this.state.order.channel]["type"]+"/item?id="+t.spu),this.$router.push(e)},onPay:function(){var t=this,e="/mall/pay";this.state.order.channel>0&&(e="/"+this.channel[this.state.order.channel]["type"]+"/pay"),this.$http.post(e+"?oid="+this.id).then((function(e){t.state.payData=Object(c["a"])(Object(c["a"])({},e),{},{json:JSON.stringify(e)}),t.state.payShow=!0}))},onClose:function(){0==this.state.order.status&&this.$http.post("/mall/orderClose?id="+this.id).then(this.onLoad)},onFinish:function(){2==this.state.order.status&&this.$http.post("/mall/orderFinish?id="+this.id).then(this.onLoad)},onService:function(){this.$router.push("/my/service?id="+this.id)},handlePay:function(t){this.state.payShow=!1,this.$dialog.alert({message:"订单支付"+(t?"成功":"失败"),theme:"round-button"}).then(this.onLoad)},copy:function(t){this.$copy(t,"已复制到剪贴板\n建议采用图片方式分享")},share:function(t,e){var a=this.state.order.card>0?"pick":"",c="string"==typeof this.state.order.detail[0]["digital"]?JSON.parse(this.state.order.detail[0]["digital"]):{};console.log(c),"string"==typeof c["tag"]&&/^gift/i.test(c["tag"])&&(a="gift");var i=this.$host+"/mall/card?type="+a+"&token="+encodeURIComponent(t)+"&deadline="+encodeURIComponent(e);"object"==Object(n["a"])(c)&&("string"==typeof c["bg"]&&(i+="&bg="+c["bg"]),"undefined"!=typeof c["x"]&&(i+="&x="+c["x"]),"undefined"!=typeof c["y"]&&(i+="&y="+c["y"]),i+="&qr="+(c["qr"]?c["qr"]:0)),this.state.giftcard=i,this.state.popup1=!0}}}}).call(this,a("81b0"))},ec08:function(t,e,a){},ec39:function(t,e,a){"use strict";(function(t){var n=a("5530"),c=(a("a9e3"),a("b0c0"),a("4de4"),a("ac1f"),a("b64b"),a("7a23")),i=a("5502"),s=a("2824"),r=a("a6e6");e["a"]={components:{BaseLayout:s["a"],Pay:r["default"]},name:"DigitalDetail",props:{action:{type:String,default:"member"},cid:{type:[String,Number],default:0},id:{type:[String,Number],default:0}},data:function(){var t=Object(c["E"])({topCat:{},subCat:{},active:0,list:{},spu:{},sku:{},item:{},type:0,title:"",intro:"",id:0,api:0,account:"",quantity:1,payData:{},payShow:!1,popup:!1});return{state:t}},created:function(){var e=this;this.$http.get("/digital/category?type="+this.action+"&deep=0").then((function(t){e.state.title=t[0].name})),this.$http.post("/digital/category?id="+parseInt(this.cid)+"&deep=2").then((function(a){e.state.topCat=a[0],e.state.subCat=t.filter(a[0]["children"],{status:"1"}),e.init()}))},computed:Object(n["a"])(Object(n["a"])({},Object(i["d"])(["config","profile"])),Object(i["b"])(["uid"])),watch:{$route:function(t,e){t.path==e.path&&t.query!=e.query&&setTimeout(this.init,100)}},methods:{init:function(){var t=this,e=/(\d+)[^\d](\d+)/.exec(this.cid);this.$http.post("/digital/list?cid="+(e?e[1]:this.cid)).then((function(a){t.state.list=a,t.state.active=e?e[2]:Object.keys(a).shift(),t.handleChange()}))},handleChange:function(){this.state.spu=this.state.list[this.state.active]||{},this.state.id=this.id||Object.keys(this.state.spu).shift(),this.handleChoose(this.state.spu[this.state.id]||null)},handleChoose:function(t){t&&"undefined"!=typeof t.id&&(this.state.item=t,this.state.id=t.id,this.state.type=t.type,this.state.intro=t.intro,this.state.api="",this.state.sku=JSON.parse(t.spec))},handleSubmit:function(){var t=this;return this.state.id<=0||this.state.api.length<=0?this.$toast("请选择项目及价格"):0==this.state.type&&this.state.account.length<5?this.$toast("请填写充值账号"):(0==this.state.type&&(this.state.quantity=1),1==this.state.type&&(this.state.account=""),void this.$http.post("/digital/checkout?id="+this.state.id+"&api="+this.state.api+"&account="+this.state.account+"&quantity="+this.state.quantity).then((function(e){t.state.payData=Object(n["a"])(Object(n["a"])({},e),{},{json:JSON.stringify(e)}),t.state.payShow=!0})))},handlePay:function(t){this.state.payShow=!1,t&&this.$dialog.alert({title:"订单已生成",message:"请点击下方“订单记录”查看到账情况",theme:"round-button"})}}}}).call(this,a("81b0"))}}]);