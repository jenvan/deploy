(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8cb891ac"],{"043e":function(t,e,i){},"0d48":function(t,e,i){"use strict";i("043e")},2175:function(t,e,i){"use strict";i.r(e);var s=i("7a23");const a=t=>(Object(s["pushScopeId"])("data-v-44889887"),t=t(),Object(s["popScopeId"])(),t),o={class:"fields"},n=a(()=>Object(s["createElementVNode"])("legend",null,"所选方案参数设置",-1)),l=a(()=>Object(s["createElementVNode"])("div",{class:"notice"},"温馨提示：BTC 价格暴跌则立即暂停自动建仓30分钟；如果系统内置的自动建仓推荐方案不能满足您的要求，请升级钻石会员后按照自己的指标要求进行自定义。",-1));function c(t,e,i,a,c,r){const h=Object(s["resolveComponent"])("van-picker"),d=Object(s["resolveComponent"])("van-popup"),m=Object(s["resolveComponent"])("van-cell"),p=Object(s["resolveComponent"])("van-stepper"),b=Object(s["resolveComponent"])("van-field"),u=Object(s["resolveComponent"])("van-button"),f=Object(s["resolveComponent"])("van-form"),w=Object(s["resolveComponent"])("BaseLayout");return Object(s["openBlock"])(),Object(s["createBlock"])(w,{title:"自动建仓"},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(d,{show:a.state.showPicker1,"onUpdate:show":e[1]||(e[1]=t=>a.state.showPicker1=t),round:"",position:"bottom"},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(h,{title:"选择推荐方案",columns:a.state.list1,"columns-field-names":{text:"name"},onCancel:e[0]||(e[0]=t=>a.state.showPicker1=!1),onConfirm:r.onConfirm1},null,8,["columns","onConfirm"])]),_:1},8,["show"]),Object(s["createVNode"])(d,{show:a.state.showPicker2,"onUpdate:show":e[3]||(e[3]=t=>a.state.showPicker2=t),round:"",position:"bottom"},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(h,{title:"选择策略模板",columns:a.state.list2,"columns-field-names":{text:"name"},onCancel:e[2]||(e[2]=t=>a.state.showPicker2=!1),onConfirm:r.onConfirm2},null,8,["columns","onConfirm"])]),_:1},8,["show"]),Object(s["createVNode"])(f,{class:"form"},{default:Object(s["withCtx"])(()=>[Object(s["createVNode"])(m,{class:Object(s["normalizeClass"])(["chooser",a.state.list1.length>0?"animate__animated animate__flash":""]),border:!1,title:r.title1,label:"共有 "+a.state.list1.length+" 个推荐方案","is-link":"",onClick:e[4]||(e[4]=t=>a.state.showPicker1=!0)},null,8,["class","title","label"]),Object(s["createVNode"])(m,{class:Object(s["normalizeClass"])(["chooser",a.state.list2.length>0?"animate__animated animate__flash":""]),border:!1,title:r.title2,label:"共有 "+a.state.list2.length+" 个策略模板","is-link":"",onClick:e[5]||(e[5]=t=>a.state.showPicker2=!0)},null,8,["class","title","label"]),Object(s["withDirectives"])(Object(s["createElementVNode"])("fieldset",o,[n,Object(s["createVNode"])(b,{class:"stepper",label:"限制最大任务数","label-width":"200","right-icon":"warning-o",onClickRightIcon:e[7]||(e[7]=t=>r.showTip("该方案允许同时进行的最大监控任务数量（持仓币种数量）"))},{input:Object(s["withCtx"])(()=>[Object(s["createVNode"])(p,{modelValue:a.state.config.limit_task,"onUpdate:modelValue":e[6]||(e[6]=t=>a.state.config.limit_task=t),step:"1",min:"1",max:"100","button-size":"18"},null,8,["modelValue"])]),_:1}),Object(s["createVNode"])(b,{class:"stepper",label:"限制补仓率（补仓/建仓）","label-width":"200","right-icon":"warning-o",onClickRightIcon:e[9]||(e[9]=t=>r.showTip("待推荐币种的历史补仓次数与建仓次数的比值 < 设置比值时推荐（根据整个系统历史成交数据统计）"))},{input:Object(s["withCtx"])(()=>[Object(s["createVNode"])(p,{modelValue:a.state.config.limit_rate,"onUpdate:modelValue":e[8]||(e[8]=t=>a.state.config.limit_rate=t),step:"0.1",min:"0.1",max:"10","button-size":"18"},null,8,["modelValue"])]),_:1}),Object(s["createVNode"])(b,{class:"stepper",label:"相同币种推荐间隔（分钟）","label-width":"200","right-icon":"warning-o",onClickRightIcon:e[11]||(e[11]=t=>r.showTip("同一方案下同一币种推荐的最小时间间隔"))},{input:Object(s["withCtx"])(()=>[Object(s["createVNode"])(p,{modelValue:a.state.config.limit_interval,"onUpdate:modelValue":e[10]||(e[10]=t=>a.state.config.limit_interval=t),step:"1",min:"3",max:"1440","button-size":"18"},null,8,["modelValue"])]),_:1}),Object(s["createVNode"])(b,{class:"stepper",label:"相同币种的监控任务数","label-width":"200","right-icon":"warning-o",onClickRightIcon:e[13]||(e[13]=t=>r.showTip("同一方案下同一币种允许的最大监控（持仓）任务数量"))},{input:Object(s["withCtx"])(()=>[Object(s["createVNode"])(p,{modelValue:a.state.config.limit_number,"onUpdate:modelValue":e[12]||(e[12]=t=>a.state.config.limit_number=t),step:"1",min:"1",max:"10","button-size":"18"},null,8,["modelValue"])]),_:1}),Object(s["createVNode"])(b,{class:"stepper",label:"限制买入价1（买入/上次买入）","label-width":"200","right-icon":"warning-o",onClickRightIcon:e[15]||(e[15]=t=>r.showTip("同一方案下待推荐币种的买入价和正在持仓的同一币种的买入价格的比值 < 设置的比值时推荐；若无持仓则忽略此规则"))},{input:Object(s["withCtx"])(()=>[Object(s["createVNode"])(p,{modelValue:a.state.config.limit_price1,"onUpdate:modelValue":e[14]||(e[14]=t=>a.state.config.limit_price1=t),step:"0.01",min:"0.01",max:"10","button-size":"18"},null,8,["modelValue"])]),_:1}),Object(s["createVNode"])(b,{class:"stepper",label:"限制买入价2（买入/上次卖出）","label-width":"200","right-icon":"warning-o",onClickRightIcon:e[17]||(e[17]=t=>r.showTip("同一方案下待推荐币种的买入价与该币种最近60分钟内卖出价的比值 < 设置比值时推荐，最近60分钟内没卖出则忽略此规则"))},{input:Object(s["withCtx"])(()=>[Object(s["createVNode"])(p,{modelValue:a.state.config.limit_price2,"onUpdate:modelValue":e[16]||(e[16]=t=>a.state.config.limit_price2=t),step:"0.01",min:"0.01",max:"10","button-size":"18"},null,8,["modelValue"])]),_:1})],512),[[s["vShow"],a.state.sid>0]]),Object(s["createVNode"])(u,{block:"",class:"submit",type:"primary",onClick:r.onSubmit},{default:Object(s["withCtx"])(()=>[Object(s["createTextVNode"])("保存")]),_:1},8,["onClick"]),l]),_:1})]),_:1})}i("14d9");var r=i("2824"),h={components:{BaseLayout:r["a"]},setup(){const t=Object(s["reactive"])({showPicker1:!1,showPicker2:!1,list:[],list1:[{id:1,name:"快线：低位急速下跌时买入"},{id:2,name:"短线：低位上涨趋势时买入"}],list2:[],pid:0,sid:0,config:{limit_task:10,limit_rate:2,limit_interval:3,limit_number:2,limit_price1:.9,limit_price2:1.1}});return{state:t}},created(){this.initPlan(),this.$http.post("/exchange/strategylist").then(t=>{if(0==t.length)return this.$toast("还没有策略模板，请先增加"),this.$router.push("/my/strategy/create");this.state.list2=[{id:0,name:"【不使用选择的方案】"}].concat(t)})},computed:{name1(){let t="";for(let e in this.state.list1)if(this.state.list1[e].id==this.state.pid){t=this.state.list1[e].name;break}return t},name2(){let t="";for(let e in this.state.list2)if(this.state.list2[e].id==this.state.sid){t=this.state.list2[e].name;break}return t},title1(){return 0==this.state.pid?"请选择系统内置的自动建仓推荐方案":"符合【 "+this.name1+" 】方案时"},title2(){return 0==this.state.pid?"请先选择推荐方案，再选择量化策略":0==this.state.sid?"【暂停推荐】":"使用【 "+this.name2+" 】策略逢低建仓"}},methods:{initPlan(){this.$http.get("/exchange/planlist").then(t=>this.state.list=t)},showTip(t){this.$toast({message:t,duration:0,closeOnClick:!0})},onConfirm1(t){if(this.state.showPicker1=!1,this.state.pid=t.id,0!=this.state.list.length)for(let e in this.state.list)if(this.state.list[e].pid==this.state.pid){this.state.sid=this.state.list[e].sid,this.state.config={...this.state.config,...JSON.parse(this.state.list[e].config)};break}},onConfirm2(t){if(this.state.showPicker2=!1,0==this.state.pid)return this.state.sid=0,this.$toast("请先选择方案");this.state.sid=t.id,this.state.name2=t.name},onSubmit(){if(0==this.state.pid)return this.$toast("请先选择方案");this.$http.post("/exchange/plansave",{pid:this.state.pid,sid:this.state.sid,config:JSON.stringify(this.state.config)}).then(()=>{this.initPlan()})}}},d=(i("0d48"),i("6b0d")),m=i.n(d);const p=m()(h,[["render",c],["__scopeId","data-v-44889887"]]);e["default"]=p}}]);
//# sourceMappingURL=chunk-8cb891ac.c309709b.js.map