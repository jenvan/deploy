{"version":3,"sources":["webpack:///./src/views/MyExchangePlan.vue?3709","webpack:///./src/views/MyExchangePlan.vue","webpack:///./src/views/MyExchangePlan.vue?7e16"],"names":["class","_createElementVNode","_createBlock","_component_BaseLayout","title","_createVNode","_component_van_popup","show","$setup","state","showPicker1","$event","round","position","_component_van_picker","columns","list1","columns-field-names","text","onCancel","_cache","onConfirm","$options","onConfirm1","showPicker2","list2","onConfirm2","_component_van_form","_component_van_cell","_normalizeClass","length","border","title1","label","is-link","onClick","title2","_hoisted_1","_hoisted_2","_component_van_field","label-width","right-icon","onClickRightIcon","showTip","input","_withCtx","_component_van_stepper","config","limit_task","step","min","max","button-size","limit_rate","limit_interval","limit_number","limit_price1","limit_price2","sid","_component_van_button","block","type","onSubmit","_hoisted_3","components","BaseLayout","setup","reactive","list","id","name","pid","created","this","initPlan","$http","post","then","data","$toast","$router","push","concat","computed","name1","i","name2","methods","get","msg","message","duration","closeOnClick","obj","JSON","parse","stringify","__exports__","render"],"mappings":"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","file":"asset/js/chunk-8cb891ac.c309709b.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./MyExchangePlan.vue?vue&type=style&index=0&id=44889887&scoped=true&lang=css\"","<template>\n  <BaseLayout title=\"自动建仓\">\n    \n    <van-popup v-model:show=\"state.showPicker1\" round position=\"bottom\">\n      <van-picker title=\"选择推荐方案\" :columns=\"state.list1\" :columns-field-names=\"{text:'name'}\" @cancel=\"state.showPicker1 = false\" @confirm=\"onConfirm1\" />\n    </van-popup>\n    \n    <van-popup v-model:show=\"state.showPicker2\" round position=\"bottom\">\n      <van-picker title=\"选择策略模板\" :columns=\"state.list2\" :columns-field-names=\"{text:'name'}\" @cancel=\"state.showPicker2 = false\" @confirm=\"onConfirm2\" />\n    </van-popup>\n\n    <van-form class=\"form\">\n\n      <van-cell class=\"chooser\" :class=\"state.list1.length > 0 ? 'animate__animated animate__flash' : ''\" :border=\"false\" :title=\"title1\" :label=\"'共有 ' + state.list1.length + ' 个推荐方案'\" is-link @click=\"state.showPicker1 = true\" />\n      \n      <van-cell class=\"chooser\" :class=\"state.list2.length > 0 ? 'animate__animated animate__flash' : ''\" :border=\"false\" :title=\"title2\" :label=\"'共有 ' + state.list2.length + ' 个策略模板'\" is-link @click=\"state.showPicker2 = true\" />\n\n      <fieldset class=\"fields\" v-show=\"state.sid > 0\">\n        \n        <legend>所选方案参数设置</legend>\n\n        <van-field class=\"stepper\" label=\"限制最大任务数\" label-width=\"200\" right-icon=\"warning-o\" @click-right-icon=\"showTip('该方案允许同时进行的最大监控任务数量（持仓币种数量）')\">\n          <template #input><van-stepper v-model=\"state.config.limit_task\" step=\"1\" min=\"1\" max=\"100\" button-size=\"18\" /></template>\n        </van-field>\n\n        <van-field class=\"stepper\" label=\"限制补仓率（补仓/建仓）\" label-width=\"200\" right-icon=\"warning-o\" @click-right-icon=\"showTip('待推荐币种的历史补仓次数与建仓次数的比值 < 设置比值时推荐（根据整个系统历史成交数据统计）')\">\n          <template #input><van-stepper v-model=\"state.config.limit_rate\" step=\"0.1\" min=\"0.1\" max=\"10\" button-size=\"18\" /></template>\n        </van-field>\n\n        <van-field class=\"stepper\" label=\"相同币种推荐间隔（分钟）\" label-width=\"200\" right-icon=\"warning-o\" @click-right-icon=\"showTip('同一方案下同一币种推荐的最小时间间隔')\">\n          <template #input><van-stepper v-model=\"state.config.limit_interval\" step=\"1\" min=\"3\" max=\"1440\" button-size=\"18\" /></template>\n        </van-field>\n\n        <van-field class=\"stepper\" label=\"相同币种的监控任务数\" label-width=\"200\" right-icon=\"warning-o\" @click-right-icon=\"showTip('同一方案下同一币种允许的最大监控（持仓）任务数量')\">\n          <template #input><van-stepper v-model=\"state.config.limit_number\" step=\"1\" min=\"1\" max=\"10\" button-size=\"18\" /></template>\n        </van-field>\n\n        <van-field class=\"stepper\" label=\"限制买入价1（买入/上次买入）\" label-width=\"200\" right-icon=\"warning-o\" @click-right-icon=\"showTip('同一方案下待推荐币种的买入价和正在持仓的同一币种的买入价格的比值 < 设置的比值时推荐；若无持仓则忽略此规则')\">\n          <template #input><van-stepper v-model=\"state.config.limit_price1\" step=\"0.01\" min=\"0.01\" max=\"10\" button-size=\"18\" /></template>\n        </van-field>\n\n        <van-field class=\"stepper\" label=\"限制买入价2（买入/上次卖出）\" label-width=\"200\" right-icon=\"warning-o\" @click-right-icon=\"showTip('同一方案下待推荐币种的买入价与该币种最近60分钟内卖出价的比值 < 设置比值时推荐，最近60分钟内没卖出则忽略此规则')\">\n          <template #input><van-stepper v-model=\"state.config.limit_price2\" step=\"0.01\" min=\"0.01\" max=\"10\" button-size=\"18\" /></template>\n        </van-field>\n\n      </fieldset>\n      \n      <van-button block class=\"submit\" type=\"primary\" @click=\"onSubmit\">保存</van-button>\n\n      <div class=\"notice\">温馨提示：BTC 价格暴跌则立即暂停自动建仓30分钟；如果系统内置的自动建仓推荐方案不能满足您的要求，请升级钻石会员后按照自己的指标要求进行自定义。</div>\n\n    </van-form>\n\n  </BaseLayout>\n</template>\n\n<style scoped>\n.form {\n  margin: 10px;\n  border-radius: 5px;\n}\n.chooser {\n  margin-top: 10px;\n  background: #F6F6F6;\n  border-radius: 5px;\n  border: solid 1px #DDD;\n  color: #000;\n}\n.fields {\n  margin: 15px 0;\n  padding: 0;\n  background: #FFF;\n  border-radius: 5px;\n  border: solid 1px #DDD;\n  overflow: hidden;\n}\nlegend {\n  margin-left: 10px;\n  padding: 5px;\n  background: #F6F6F6;\n  border-radius: 5px;\n  border: solid 1px #DDD;\n  font-size: 14px;\n  text-align: left;\n}\n.stepper {\n  padding: 10px 5px 10px 15px;\n}\n.submit {\n  margin:10px 0;\n}\n\n.notice {\n  margin-top: 20px;\n  padding: 10px;\n  color: #999;\n  font-size: 12px;\n  line-height: 24px;\n}\n</style>\n\n<script>\nimport {reactive} from 'vue'\nimport BaseLayout from '@/components/BaseLayout.vue'\n\nexport default {\n  components: {BaseLayout},\n\nsetup(){\n    const state = reactive({\n      showPicker1: false,\n      showPicker2: false,\n      list: [], // 自有计划\n      list1: [{id:1, name: \"快线：低位急速下跌时买入\"}, {id: 2, name: \"短线：低位上涨趋势时买入\"}],     // 所有方案\n      list2: [], // 自有策略\n      pid: 0,\n      sid: 0,\n      config: {\n        limit_task: 10,\n        limit_rate: 2,\n        limit_interval: 3,\n        limit_number: 2,\n        limit_price1: 0.9,\n        limit_price2: 1.1,\n      },\n    });\n\n    return { state };\n  },\n\n  created() {\n    this.initPlan();\n    this.$http.post(\"/exchange/strategylist\").then((data) => {\n      if (data.length == 0){\n        this.$toast(\"还没有策略模板，请先增加\");\n        return this.$router.push(\"/my/strategy/create\");\n      }\n      this.state.list2 = [{id: 0, name: \"【不使用选择的方案】\"}].concat(data);\n    });\n  },\n\n  computed: {\n    name1(){\n      let name = \"\";\n      for (let i in this.state.list1){\n        if (this.state.list1[i].id == this.state.pid){\n          name = this.state.list1[i].name;\n          break;\n        }\n      }\n      return name;\n    },\n    name2(){\n      let name = \"\";\n      for (let i in this.state.list2){\n        if (this.state.list2[i].id == this.state.sid){\n          name = this.state.list2[i].name;\n          break;\n        }\n      }\n      return name;\n    },\n    title1(){\n      return this.state.pid == 0 ? \"请选择系统内置的自动建仓推荐方案\" : \"符合【 \" + this.name1 + \" 】方案时\";\n    },\n    title2(){\n      if (this.state.pid == 0){\n        return \"请先选择推荐方案，再选择量化策略\";\n      }\n      return this.state.sid == 0 ? \"【暂停推荐】\" : \"使用【 \" + this.name2 + \" 】策略逢低建仓\";\n    },\n  },\n\n  methods: {\n    initPlan(){\n      this.$http.get(\"/exchange/planlist\").then((data) => this.state.list = data);\n    },\n    showTip(msg){\n      this.$toast({message:msg, duration:0, closeOnClick:true});\n    },\n    onConfirm1(obj){\n      this.state.showPicker1 = false;\n      this.state.pid = obj.id;\n      if (this.state.list.length == 0) return;\n      for (let i in this.state.list){\n        if (this.state.list[i].pid == this.state.pid){\n          this.state.sid = this.state.list[i].sid;\n          this.state.config = {...this.state.config, ...JSON.parse(this.state.list[i].config)};\n          break;\n        }\n      }\n    },\n    onConfirm2(obj){\n      this.state.showPicker2 = false;\n      if (this.state.pid == 0){\n        this.state.sid = 0;\n        return this.$toast(\"请先选择方案\");\n      }\n      this.state.sid = obj.id;\n      this.state.name2 = obj.name;\n    },\n    onSubmit(){\n      if (this.state.pid == 0)\n        return this.$toast(\"请先选择方案\");\n      \n      this.$http.post(\"/exchange/plansave\", {pid:this.state.pid, sid:this.state.sid, config:JSON.stringify(this.state.config)}).then(() => {\n        this.initPlan();\n      });\n    },\n  }\n\n}\n</script>\n","import { render } from \"./MyExchangePlan.vue?vue&type=template&id=44889887&scoped=true\"\nimport script from \"./MyExchangePlan.vue?vue&type=script&lang=js\"\nexport * from \"./MyExchangePlan.vue?vue&type=script&lang=js\"\n\nimport \"./MyExchangePlan.vue?vue&type=style&index=0&id=44889887&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/bot/bot/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-44889887\"]])\n\nexport default __exports__"],"sourceRoot":""}