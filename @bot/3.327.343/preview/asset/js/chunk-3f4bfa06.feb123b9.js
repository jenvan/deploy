(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f4bfa06"],{"145f":function(e,t,o){"use strict";o("380d")},"380d":function(e,t,o){},bc1a:function(e,t,o){"use strict";o.r(t);var c=o("7a23");const a=e=>(Object(c["pushScopeId"])("data-v-535f69ec"),e=e(),Object(c["popScopeId"])(),e),i=a(()=>Object(c["createElementVNode"])("br",null,null,-1)),n={class:"extra"},l={class:"extra"},r={class:"intro"};function s(e,t,a,s,d,u){const b=Object(c["resolveComponent"])("van-icon"),h=Object(c["resolveComponent"])("van-image"),p=Object(c["resolveComponent"])("van-step"),j=Object(c["resolveComponent"])("van-steps"),O=Object(c["resolveComponent"])("van-button"),m=Object(c["resolveComponent"])("van-field"),v=Object(c["resolveComponent"])("router-link"),w=Object(c["resolveComponent"])("van-form"),V=Object(c["resolveComponent"])("BaseLayout");return Object(c["openBlock"])(),Object(c["createBlock"])(V,{title:u.invite?"注册账号":u.title,bg:"linear-gradient(180deg, #EFF, #F9F9F9 10%, #F9F9F9)",height:u.invite?0:"60px",onClickBack:u.onBack},{back:Object(c["withCtx"])(()=>[Object(c["createVNode"])(b,{name:u.invite?"wap-home-o":"arrow-left",size:"large"},null,8,["name"])]),default:Object(c["withCtx"])(()=>[Object(c["withDirectives"])(Object(c["createVNode"])(h,{src:o("ec03")},null,8,["src"]),[[c["vShow"],u.invite]]),Object(c["withDirectives"])(Object(c["createVNode"])(j,{class:"step"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(p,null,{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("注册账号")]),_:1}),Object(c["createVNode"])(p,null,{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("下载 app")]),_:1}),Object(c["createVNode"])(p,null,{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("登录使用")]),_:1})]),_:1},512),[[c["vShow"],u.invite]]),Object(c["createVNode"])(w,{class:"form",onSubmit:u.onSubmit,onFailed:u.onFailed},{default:Object(c["withCtx"])(()=>[Object(c["withDirectives"])(Object(c["createVNode"])(m,{modelValue:s.state.account,"onUpdate:modelValue":t[0]||(t[0]=e=>s.state.account=e),name:"mobile",label:"手机号",placeholder:"请填写手机号",clearable:"",rules:[{required:"login"!=a.action,message:"支持大陆及港澳台手机号码"}]},{button:Object(c["withCtx"])(()=>[Object(c["createVNode"])(O,{size:"small",type:"primary",onClick:u.onSend},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("发送验证码")]),_:1},8,["onClick"])]),_:1},8,["modelValue","rules"]),[[c["vShow"],"login"!=a.action]]),Object(c["withDirectives"])(Object(c["createVNode"])(m,{modelValue:s.state.sms,"onUpdate:modelValue":t[1]||(t[1]=e=>s.state.sms=e),name:"vcode",label:"验证码",rules:[{required:"login"!=a.action,message:"请填写短信验证码"}]},null,8,["modelValue","rules"]),[[c["vShow"],"login"!=a.action]]),Object(c["withDirectives"])(Object(c["createVNode"])(m,{modelValue:s.state.account,"onUpdate:modelValue":t[2]||(t[2]=e=>s.state.account=e),name:"username",label:"账号",clearable:"",placeholder:"login"==a.action?"手机号或用户名":"请填写用户名",rules:[{required:"login"==a.action,message:"用户名以字母开头且长度不小于4"}]},null,8,["modelValue","placeholder","rules"]),[[c["vShow"],"login"==a.action]]),Object(c["createVNode"])(m,{modelValue:s.state.password,"onUpdate:modelValue":t[3]||(t[3]=e=>s.state.password=e),type:"password",name:"password",label:"密码",clearable:"",placeholder:"changepassword"==a.action?"请填写新的密码":"请填写密码",rules:[{required:!0,message:"包含字母和数字且长度不小于6"}]},null,8,["modelValue","placeholder"]),Object(c["withDirectives"])(Object(c["createVNode"])(m,{modelValue:s.state.code,"onUpdate:modelValue":t[4]||(t[4]=e=>s.state.code=e),name:"code",label:"邀请码",placeholder:"没有可以不用填写"},null,8,["modelValue"]),[[c["vShow"],"invite"==a.action]]),i,Object(c["createVNode"])(O,{block:"",type:"primary","native-type":"submit"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(u.title),1)]),_:1}),Object(c["withDirectives"])(Object(c["createElementVNode"])("div",n,[Object(c["createTextVNode"])("没有账号？"),Object(c["createVNode"])(v,{class:"register",to:"/register"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("注册")]),_:1}),Object(c["createVNode"])(v,{class:"right",to:"/changepassword"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("忘记密码？")]),_:1})],512),[[c["vShow"],!u.invite&&"login"==a.action]]),Object(c["withDirectives"])(Object(c["createElementVNode"])("div",l,[Object(c["createTextVNode"])("已有账号？"),Object(c["createVNode"])(v,{class:"login",to:"/login"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("登录")]),_:1})],512),[[c["vShow"],!u.invite&&"register"==a.action]])]),_:1},8,["onSubmit","onFailed"]),Object(c["createElementVNode"])("div",r,[Object(c["withDirectives"])(Object(c["createVNode"])(h,{src:o("c869"),height:"1000px"},null,8,["src"]),[[c["vShow"],u.invite]])])]),_:1},8,["title","height","onClickBack"])}o("14d9");var d=o("5502"),u=o("2824"),b={components:{BaseLayout:u["a"]},props:{action:{type:String,default:"login"},code:{type:String,default:""},redirect:{type:String,default:"/my"}},setup(){const e=Object(c["reactive"])({account:"test",password:"Test123",code:"",sms:""});return{state:e}},created(){this.state.code=this.code},mounted(){if("logout"==this.action){let e=this;this.$http.post("/user/"+this.action).then(t=>{e.auth(t),e.$router.push(e.redirect)})}},computed:{invite(){return"invite"==this.action},title(){let e=this.action,t={login:"登录",register:"注册",changepassword:"找回密码"};return this.invite?"注册":"undefined"==typeof t[e]?"登录":t[e]},...Object(d["d"])(["profile"]),...Object(d["b"])(["authorized"])},methods:{onBack:function(){return this.invite?this.$router.push("/"):this.$router.push("/my")},onSend:function(){this.$http.post("/user/verify?mobile="+this.state.account)},onSubmit:function(e){let t=this,o="invite"!=this.action?this.action:"register";/^\d+$/.test(this.state.account)&&delete e["username"]||delete e["mobile"],this.$http.post("/user/"+o,e).then(e=>{t.auth(e),t.$router.push(t.redirect)})},onFailed(e){this.$toast("请按要求填写表单"),console.error("表单提交失败",e)},...Object(d["c"])(["auth"])}},h=(o("145f"),o("6b0d")),p=o.n(h);const j=p()(b,[["render",s],["__scopeId","data-v-535f69ec"]]);t["default"]=j},c869:function(e,t,o){e.exports=o.p+"asset/img/invite_intro.3b623efd.jpg"},ec03:function(e,t,o){e.exports=o.p+"asset/img/invite_title.984e4a7a.jpg"}}]);
//# sourceMappingURL=chunk-3f4bfa06.feb123b9.js.map