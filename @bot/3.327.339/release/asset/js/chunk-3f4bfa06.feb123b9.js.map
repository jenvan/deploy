{"version":3,"sources":["webpack:///./src/views/Passport.vue?62e0","webpack:///./src/views/Passport.vue","webpack:///./src/views/Passport.vue?a060","webpack:///./src/assets/invite_intro.jpg","webpack:///./src/assets/invite_title.jpg"],"names":["_createElementVNode","class","_createBlock","_component_BaseLayout","title","$options","invite","bg","height","onClickBack","onBack","back","_withCtx","_createVNode","_component_van_icon","name","size","_component_van_image","src","require","_component_van_steps","_component_van_step","_component_van_form","onSubmit","onFailed","_component_van_field","$setup","state","account","$event","label","placeholder","clearable","rules","required","$props","action","message","button","_component_van_button","type","onClick","onSend","sms","password","code","_hoisted_1","block","native-type","_hoisted_2","_component_router_link","to","_hoisted_3","_hoisted_4","components","BaseLayout","props","String","default","redirect","setup","reactive","created","this","mounted","me","$http","post","then","data","auth","$router","push","computed","act","arr","mapState","mapGetters","methods","values","test","err","$toast","console","error","mapMutations","__exports__","render","module","exports"],"mappings":"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","file":"asset/js/chunk-3f4bfa06.feb123b9.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Passport.vue?vue&type=style&index=0&id=535f69ec&scoped=true&lang=css\"","<template>\n  <BaseLayout :title=\"!invite ? title : '注册账号'\" bg=\"linear-gradient(180deg, #EFF, #F9F9F9 10%, #F9F9F9)\" :height=\"!invite? '60px': 0\" @click-back=\"onBack\">\n    <template #back><van-icon :name=\"invite?'wap-home-o':'arrow-left'\" size=\"large\"></van-icon></template>\n\n    <van-image :src=\"require('@/assets/invite_title.jpg')\" v-show=\"invite\"></van-image>\n    <van-steps class=\"step\" v-show=\"invite\">\n      <van-step>注册账号</van-step>\n      <van-step>下载 app</van-step>\n      <van-step>登录使用</van-step>\n    </van-steps>\n\n    <van-form class=\"form\" @submit=\"onSubmit\" @failed=\"onFailed\">\n      <van-field\n        v-show=\"action != 'login'\"\n        v-model=\"state.account\"\n        name=\"mobile\"\n        label=\"手机号\"\n        placeholder=\"请填写手机号\"\n        clearable\n        :rules=\"[{ required: action != 'login', message: '支持大陆及港澳台手机号码' }]\"\n      >\n        <template #button>\n          <van-button size=\"small\" type=\"primary\" @click=\"onSend\">发送验证码</van-button>\n        </template>\n      </van-field>\n      <van-field \n        v-show=\"action != 'login'\"\n        v-model=\"state.sms\" \n        name=\"vcode\"\n        label=\"验证码\" \n        :rules=\"[{ required: action != 'login', message: '请填写短信验证码' }]\"\n      />\n\n      <van-field\n        v-show=\"action == 'login'\"\n        v-model=\"state.account\"\n        name=\"username\"\n        label=\"账号\"\n        clearable\n        :placeholder=\"action == 'login' ? '手机号或用户名' : '请填写用户名'\"\n        :rules=\"[{ required: action == 'login', message: '用户名以字母开头且长度不小于4' }]\"\n      />\n      <van-field\n        v-model=\"state.password\"\n        type=\"password\"\n        name=\"password\"\n        label=\"密码\"\n        clearable\n        :placeholder=\"action == 'changepassword' ? '请填写新的密码' : '请填写密码'\"\n        :rules=\"[{ required: true, message: '包含字母和数字且长度不小于6' }]\"\n      />\n\n      <van-field\n        v-show=\"action == 'invite'\"\n        v-model=\"state.code\"\n        name=\"code\"\n        label=\"邀请码\"\n        placeholder=\"没有可以不用填写\"\n      />\n\n      <br/>\n      <van-button block type=\"primary\" native-type=\"submit\">{{title}}</van-button>\n\n      <div class=\"extra\" v-show=\"!invite && action=='login'\"   >没有账号？<router-link class=\"register\" to=\"/register\">注册</router-link><router-link class=\"right\"  to=\"/changepassword\">忘记密码？</router-link></div>\n      <div class=\"extra\" v-show=\"!invite && action=='register'\">已有账号？<router-link class=\"login\" to=\"/login\">登录</router-link></div>\n\n    </van-form>\n\n    <div class=\"intro\">\n      <van-image v-show=\"invite\" :src=\"require('@/assets/invite_intro.jpg')\" height=\"1000px\"></van-image>\n    </div>\n\n  </BaseLayout>\n</template>\n\n<style scoped>\n.step {\n  margin: 10px;\n}\n.form {\n  margin: 10px auto;\n  padding: 10px;\n  border-radius: 10px;\n  overflow: hidden;\n}\n.extra {\n  margin-top: 20px;\n  padding: 0 10px;\n  color: #999;\n  font-size: 14px;\n}\n.right {\n  float: right;\n}\n.intro {\n  margin-top: 20px;\n}\n</style>\n\n<script>\nimport {reactive} from 'vue'\nimport {mapState, mapGetters, mapMutations} from 'vuex'\nimport BaseLayout from '@/components/BaseLayout.vue'\n\nexport default {\n  components: {BaseLayout},\n\n  props: {\n    action: {\n      type: String,\n      default: \"login\",\n    },\n    code: {\n      type: String,\n      default: \"\",\n    },\n    redirect: {\n      type: String,\n      default: \"/my\",\n    }\n  },\n\n  setup(){\n    const state = reactive({\n      account: \"test\",\n      password: \"Test123\",\n      code: \"\",\n      sms: \"\",\n    });\n\n    return {\n      state,\n    };\n  },\n\n  created(){\n    this.state.code = this.code;\n  },\n\n  mounted(){\n    if (this.action == \"logout\"){\n      let me = this;\n      this.$http.post(\"/user/\" + this.action).then((data) => {\n        me.auth(data);\n        me.$router.push(me.redirect);\n      });\n    }\n  },\n\n  computed: {\n    invite(){\n      return this.action == \"invite\" ? true : false;\n    },\n    title() {\n      let act = this.action;\n      let arr = {\n        \"login\" : \"登录\",\n        \"register\" : \"注册\",\n        \"changepassword\" : \"找回密码\",\n      }\n      if (this.invite)\n        return \"注册\";\n      if (typeof arr[act] == \"undefined\")\n        return \"登录\";\n      return arr[act];\n    },\n    ...mapState([\"profile\"]),\n    ...mapGetters([\"authorized\"]),\n  },\n\n  methods: {\n    onBack: function(){\n      if (this.invite)\n        return this.$router.push(\"/\");\n      return this.$router.push(\"/my\");\n    },\n    onSend: function(){\n      this.$http.post(\"/user/verify?mobile=\" + this.state.account);\n    },\n    onSubmit: function(values) {\n      let me = this;\n      let action = this.action != \"invite\" ? this.action : \"register\";\n      /^\\d+$/.test(this.state.account) && delete values[\"username\"] || delete values[\"mobile\"];\n      this.$http.post(\"/user/\" + action, values).then((data) => {\n        me.auth(data);\n        me.$router.push(me.redirect);\n      });\n    },\n    onFailed(err){\n      this.$toast(\"请按要求填写表单\");\n      console.error(\"表单提交失败\", err);\n    },\n    ...mapMutations([\"auth\"]),\n  }\n\n}\n\n</script>\n","import { render } from \"./Passport.vue?vue&type=template&id=535f69ec&scoped=true\"\nimport script from \"./Passport.vue?vue&type=script&lang=js\"\nexport * from \"./Passport.vue?vue&type=script&lang=js\"\n\nimport \"./Passport.vue?vue&type=style&index=0&id=535f69ec&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/bot/bot/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-535f69ec\"]])\n\nexport default __exports__","module.exports = __webpack_public_path__ + \"asset/img/invite_intro.3b623efd.jpg\";","module.exports = __webpack_public_path__ + \"asset/img/invite_title.984e4a7a.jpg\";"],"sourceRoot":""}