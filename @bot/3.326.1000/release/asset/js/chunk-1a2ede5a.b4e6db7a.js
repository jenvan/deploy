(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a2ede5a"],{"0db3":function(t,e,o){"use strict";o("a0a6")},"306f":function(t,e,o){"use strict";var a=o("7a23");function c(t,e,o,c,i,s){return Object(a["openBlock"])(),Object(a["createElementBlock"])("ul",{class:"card",style:Object(a["normalizeStyle"])({background:o.bg,color:o.fg})},[Object(a["createElementVNode"])("li",{class:"slot",style:Object(a["normalizeStyle"])({fontSize:o.size})},[Object(a["renderSlot"])(t.$slots,"prepend",{},void 0,!0)],4),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(i.list,(t,e)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:e,style:Object(a["normalizeStyle"])({fontSize:o.size})},Object(a["toDisplayString"])(t),5))),128)),Object(a["createElementVNode"])("li",{class:"slot",style:Object(a["normalizeStyle"])({fontSize:o.size})},[Object(a["renderSlot"])(t.$slots,"default",{},void 0,!0)],4)],4)}o("14d9");var i={props:{number:{type:[String,Number],default:0},fg:{type:String,default:"#666"},bg:{type:String,default:"transparent"},size:String},data(){return{list:[]}},mounted(){this.scroll()},watch:{number(t,e){this.scroll()}},methods:{scroll(){let t=[];this.number.toString().split("").forEach(e=>{t.push(e)});let e=setInterval(()=>{let o=t.length;if(0==o)return void clearInterval(e);let a=t.pop();if(this.list[o-1]=a,"."==a)return;let c=setInterval(()=>{this.list[o-1]++,this.list[o-1]>=10&&(this.list[o-1]=0),this.list[o-1]==a&&clearInterval(c)},30)},100)}}},s=(o("0db3"),o("6b0d")),n=o.n(s);const l=n()(i,[["render",c],["__scopeId","data-v-4ce7b42a"]]);e["a"]=l},"48d3":function(t,e,o){"use strict";o("ecfc")},a0a6:function(t,e,o){},eb40:function(t,e,o){"use strict";o.r(e);var a=o("7a23");const c=t=>(Object(a["pushScopeId"])("data-v-246825b6"),t=t(),Object(a["popScopeId"])(),t),i={class:"title"},s={class:"remark"},n={class:"title"},l={class:"remark"},r={class:"list"},d={class:"extend",style:{color:"#333"}},b={class:"head"},p={class:"head"},O={class:"form"},j=c(()=>Object(a["createElementVNode"])("label",null,"火币API访问密钥：",-1)),u={class:"slider-button"};function h(t,e,o,c,h,m){const g=Object(a["resolveComponent"])("van-icon"),f=Object(a["resolveComponent"])("van-button"),v=Object(a["resolveComponent"])("van-tag"),y=Object(a["resolveComponent"])("number-roll"),C=Object(a["resolveComponent"])("van-col"),V=Object(a["resolveComponent"])("van-row"),x=Object(a["resolveComponent"])("van-grid-item"),w=Object(a["resolveComponent"])("van-grid"),N=Object(a["resolveComponent"])("van-cell"),k=Object(a["resolveComponent"])("van-cell-group"),S=Object(a["resolveComponent"])("van-list"),D=Object(a["resolveComponent"])("van-tab"),_=Object(a["resolveComponent"])("van-tabs"),E=Object(a["resolveComponent"])("van-pull-refresh"),$=Object(a["resolveComponent"])("van-step"),B=Object(a["resolveComponent"])("van-steps"),F=Object(a["resolveComponent"])("van-action-bar-icon"),z=Object(a["resolveComponent"])("van-action-bar-button"),U=Object(a["resolveComponent"])("van-action-bar"),L=Object(a["resolveComponent"])("van-popup"),T=Object(a["resolveComponent"])("van-slider"),I=Object(a["resolveComponent"])("van-dialog"),M=Object(a["resolveComponent"])("BaseLayout");return Object(a["openBlock"])(),Object(a["createBlock"])(M,{title:"我的交易",subtitle:m.subtitle,bg:"linear-gradient(180deg, #06C, #FFF 60%, #FFF)",fg:"#FFE",onClickMore:m.onMore},{more:Object(a["withCtx"])(()=>[Object(a["createVNode"])(g,{name:"question-o",size:"large"})]),extra:Object(a["withCtx"])(()=>[Object(a["createVNode"])(f,{icon:"setting",size:"small",style:{borderRadius:"10px 0 0 10px",opacity:.8},color:"#09F",onClick:m.onExtra},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("设置")]),_:1},8,["onClick"])]),default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(E,{modelValue:c.state.refreshing,"onUpdate:modelValue":e[2]||(e[2]=t=>c.state.refreshing=t),onRefresh:m.onChange},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(V,{class:"stat",gutter:"2",justify:"space-around",align:"center"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(C,{span:"12"},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",i,[Object(a["createVNode"])(v,{size:"large",type:"success"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("今日盈利")]),_:1})]),Object(a["createVNode"])(y,{number:c.state.stat.today_profit,fg:"#F66",size:"24px"},{prepend:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("$")]),_:1},8,["number"]),Object(a["createElementVNode"])("div",s,"交易 "+Object(a["toDisplayString"])(c.state.stat.today_num)+" 笔",1)]),_:1}),Object(a["createVNode"])(C,{span:"12"},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",n,[Object(a["createVNode"])(v,{size:"large",type:"success"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("累计盈利")]),_:1})]),Object(a["createVNode"])(y,{number:c.state.stat.all_profit,fg:"#F66",size:"24px"},{prepend:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("$")]),_:1},8,["number"]),Object(a["createElementVNode"])("div",l,"交易 "+Object(a["toDisplayString"])(c.state.stat.all_num)+" 笔",1)]),_:1})]),_:1}),Object(a["createVNode"])(w,{class:"toolbar",border:!0,"column-num":4},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(x,{icon:"fire-o",style:{color:"#F09"},text:"交易动态",to:"/my/recent"}),Object(a["createVNode"])(x,{icon:"font-o",style:{color:"#F90"},text:"策略模板",to:"/my/strategy/modify"}),Object(a["createVNode"])(x,{icon:"cash-back-record",style:{color:"#C6F"},text:"手动建仓",to:"/my/strategy/apply"}),Object(a["createVNode"])(x,{icon:"after-sale",style:{color:"#69F"},text:"自动建仓",to:"/my/plan"})]),_:1}),Object(a["createElementVNode"])("div",r,[Object(a["createVNode"])(_,{active:c.state.active,"onUpdate:active":e[1]||(e[1]=t=>c.state.active=t),type:"card",color:"#09F","offset-top":"45",sticky:"",swipeable:"",animated:"",onChange:m.onChange},{default:Object(a["withCtx"])(()=>[(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])({0:"进行中的交易",1:"已完成的交易"},(t,o)=>Object(a["createVNode"])(D,{key:o,title:t},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(S,{loading:c.state.loading,"onUpdate:loading":e[0]||(e[0]=t=>c.state.loading=t),finished:c.state.finished,"loading-text":"正在请求数据 ...","finished-text":"没有更多了","immediate-check":!1,onLoad:m.onLoad},{default:Object(a["withCtx"])(()=>[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(c.state.list,(t,e)=>(Object(a["openBlock"])(),Object(a["createBlock"])(k,{class:"block",border:!1,key:e,onClick:e=>m.onDetail(t)},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(N,{class:"dt",border:!1,title:t.ts},{extra:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("span",{style:Object(a["normalizeStyle"])({color:t.color})},"涨 "+Object(a["toDisplayString"])(t.ratio)+" %，盈 "+Object(a["toDisplayString"])(t.profit)+" U",5)]),_:2},1032,["title"]),Object(a["createVNode"])(N,{class:"item",border:!1,"icon-prefix":"icon-symbol",icon:t.symbol.toLowerCase(),title:t.symbol.toUpperCase()+" / USDT",value:"$"+t.amount},null,8,["icon","title","value"]),Object(a["createElementVNode"])("div",d,"于 "+Object(a["toDisplayString"])(t.dt.substr(5,11))+" "+Object(a["toDisplayString"])(t.pid>0?"由方案 "+t.pid+" 自动":"手动")+"建仓，共买入 "+Object(a["toDisplayString"])(t.times)+" 次 "+Object(a["toDisplayString"])(t.hang),1),Object(a["withDirectives"])(Object(a["createElementVNode"])("div",{class:"extend"},"成本价："+Object(a["toDisplayString"])(t.cost_price)+"，当前价："+Object(a["toDisplayString"])(t.price),513),[[a["vShow"],9!=t.status]])]),_:2},1032,["onClick"]))),128))]),_:1},8,["loading","finished","onLoad"])]),_:2},1032,["title"])),64))]),_:1},8,["active","onChange"])])]),_:1},8,["modelValue","onRefresh"]),Object(a["createVNode"])(L,{show:c.state.popup,"onUpdate:show":e[7]||(e[7]=t=>c.state.popup=t),position:"bottom",transition:"van-slide-up",round:"",closeable:""},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(N,{border:!1,"icon-prefix":"icon-symbol",icon:c.state.item.symbol.toLowerCase(),title:c.state.item.symbol.toUpperCase()+" / USDT",label:"盈利额："+c.state.detail.profit+" U ，盈利率："+(100*c.state.detail.ratio).toString().replace(/(\.\d\d)(\d+)$/,"$1")+" %",onClick:e[3]||(e[3]=e=>t.$copy(c.state.item.id,!1))},null,8,["icon","title","label"]),Object(a["createVNode"])(B,{class:"step",direction:"vertical",active:0,onDblclick:e[4]||(e[4]=t=>c.state.popup=!1)},{default:Object(a["withCtx"])(()=>[Object(a["withDirectives"])(Object(a["createVNode"])($,{class:"status"},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("p",b,Object(a["toDisplayString"])(m.status),1),Object(a["createElementVNode"])("p",null,"成本价："+Object(a["toDisplayString"])(c.state.detail.cost_price)+"，当前价："+Object(a["toDisplayString"])(c.state.detail.price),1),Object(a["createElementVNode"])("p",null,"补仓价："+Object(a["toDisplayString"])(c.state.detail.fall_price)+"，止盈价："+Object(a["toDisplayString"])(c.state.detail.rise_price),1)]),_:1},512),[[a["vShow"],9!=c.state.item.status]]),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(c.state.detail.log,(t,e)=>(Object(a["openBlock"])(),Object(a["createBlock"])($,{key:e},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("p",p,Object(a["toDisplayString"])(t.dt+" 「"+["清仓","建仓","加仓","补仓"][t.type]+"」"),1),Object(a["createElementVNode"])("p",null,Object(a["toDisplayString"])("数量："+t.num),1),Object(a["createElementVNode"])("p",null,Object(a["toDisplayString"])("单价："+t.price+"，总价："+t.amount),1)]),_:2},1024))),128))]),_:1}),Object(a["createVNode"])(U,null,{default:Object(a["withCtx"])(()=>[Object(a["withDirectives"])(Object(a["createVNode"])(F,{icon:"after-sale",text:"调整",to:"/my/strategy/adjust?id="+c.state.item.id},null,8,["to"]),[[a["vShow"],9!=c.state.item.status]]),Object(a["withDirectives"])(Object(a["createVNode"])(F,{icon:"refund-o",text:"补仓",onClick:e[5]||(e[5]=t=>m.onOpt("append","按照策略补仓"))},null,512),[[a["vShow"],9!=c.state.item.status]]),Object(a["withDirectives"])(Object(a["createVNode"])(F,{icon:"cash-back-record",text:"平仓",onClick:e[6]||(e[6]=t=>m.onOpt("clear","平仓"))},null,512),[[a["vShow"],9!=c.state.item.status]]),Object(a["createVNode"])(z,{color:"#090",text:"再来一单",to:"/my/strategy/apply?id="+c.state.item.id},null,8,["to"])]),_:1})]),_:1},8,["show"]),Object(a["createVNode"])(I,{show:c.state.dialog,"onUpdate:show":e[11]||(e[11]=t=>c.state.dialog=t),showCancelButton:"",theme:"round-button",confirmButtonText:"设置",onConfirm:m.onConfig},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",O,[j,Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",placeholder:"Access Key","onUpdate:modelValue":e[8]||(e[8]=t=>c.state.config.ak=t)},null,512),[[a["vModelText"],c.state.config.ak]]),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"test",placeholder:"Secret Key","onUpdate:modelValue":e[9]||(e[9]=t=>c.state.config.sk=t)},null,512),[[a["vModelText"],c.state.config.sk]]),Object(a["withDirectives"])(Object(a["createElementVNode"])("label",null,"同时进行的最大任务数：",512),[[a["vShow"],!1]]),Object(a["withDirectives"])(Object(a["createVNode"])(T,{modelValue:c.state.config.num,"onUpdate:modelValue":e[10]||(e[10]=t=>c.state.config.num=t),"active-color":"#ee0a24"},{button:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",u,Object(a["toDisplayString"])(c.state.config.num),1)]),_:1},8,["modelValue"]),[[a["vShow"],!1]])])]),_:1},8,["show","onConfirm"])]),_:1},8,["subtitle","onClickMore"])}o("14d9");var m=o("2824"),g=o("306f"),f={components:{BaseLayout:m["a"],NumberRoll:g["a"]},setup(){const t=Object(a["reactive"])({popup:!1,dialog:!1,stat:{},active:0,refreshing:!1,loading:!1,finished:!1,list:[],offset:0,limit:20,id:0,item:{},detail:{},config:{num:2}});return{state:t}},created(){this.onChange()},computed:{subtitle(){return"正在进行中交易共有 "+("undefined"!=typeof this.state.stat.working?this.state.stat.working:0)+" 笔"},status(){let t={0:"监控中",1:"正在交易",2:"正在判断补仓",3:"正在判断止盈",4:"调整中",5:"正在实时监控",6:"交易失败（请检查账户余额）",7:"超标挂起（只清仓不补仓）",8:"手动暂停",9:"交易完成"};return"undefined"!=typeof t[this.state.detail.status]?t[this.state.detail.status]:"未知"}},methods:{onMore(){console.log("Click more ...")},onExtra(){this.$toast.loading(),this.$http.get("/exchange/setup").then(t=>{this.state.config={...this.state.config,...t},this.state.dialog=!0,this.$toast.clear()})},onConfig(){this.$http.post("/exchange/setup?config="+JSON.stringify(this.state.config))},onChange(){this.state.loading=!0,this.state.finished=!1,this.state.offset=0,this.state.list=[],this.onLoad(),this.$http.get("/exchange/summary?mine=1").then(t=>this.state.stat=t)},onLoad(){this.$http.get("/exchange/tasklist?mine=1&finished="+this.state.active+"&offset="+this.state.offset+"&limit="+this.state.limit).then(t=>{this.state.refreshing=!1,(0==t.length||t.length<this.state.limit)&&(this.state.finished=!0),this.state.loading=!1,this.state.offset+=t.length;for(let e in t){let o=t[e];this.state.list.push({...o,symbol:o.symbol.replace(/usdt$/,""),cost:o.cost.replace(/(\.\d\d)(\d+)$/,"$1"),amount:o.amount.replace(/(\.\d\d)(\d+)$/,"$1"),profit:o.profit.replace(/(\.\d\d)(\d+)$/,"$1"),ratio:(100*parseFloat(o.ratio)).toString().replace(/(\.\d\d)(\d+)$/,"$1"),color:o.ratio>0?"#090":"#F66",hang:7==o.status||8==o.status?"℗":""})}})},onDetail(t){this.state.item=t,this.state.id=0,this.state.detail={},this.$http.post("/exchange/taskdetail?id="+t.id).then(e=>{this.state.id=t.id,this.state.detail=e,this.state.popup=!0})},onOpt(t,e){this.$dialog.confirm({message:"确认要"+e+"吗?",theme:"round-button"}).then(()=>{this.$http.post("/exchange/tasksave?id="+this.state.id+"&action="+t).then(t=>{this.onDetail(this.state.item)})})}}},v=(o("48d3"),o("6b0d")),y=o.n(v);const C=y()(f,[["render",h],["__scopeId","data-v-246825b6"]]);e["default"]=C},ecfc:function(t,e,o){}}]);
//# sourceMappingURL=chunk-1a2ede5a.b4e6db7a.js.map