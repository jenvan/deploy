(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2647ce14"],{"0ce9":function(t,e,a){"use strict";a("d0db")},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var n=a("1d80"),i=a("5899"),s="["+i+"]",r=RegExp("^"+s+s+"*"),o=RegExp(s+s+"*$"),l=function(t){return function(e){var a=String(n(e));return 1&t&&(a=a.replace(r,"")),2&t&&(a=a.replace(o,"")),a}};t.exports={start:l(1),end:l(2),trim:l(3)}},6130:function(t,e,a){"use strict";a.r(e);a("b0c0");var n=a("7a23"),i=Object(n["P"])("data-v-486e6d3a");Object(n["z"])("data-v-486e6d3a");var s=Object(n["g"])("新增模板"),r={class:"fields"},o=Object(n["g"])("%"),l=Object(n["g"])("%"),c=Object(n["g"])("%"),u=Object(n["g"])("%"),f=Object(n["g"])("次"),d=Object(n["g"])("不补仓"),m=Object(n["g"])("单倍建仓金额"),h=Object(n["g"])("单倍递增：2、3、4、5..."),p=Object(n["g"])("双倍递增：2、4、6、8..."),b=Object(n["g"])("乘方递增：2、4、8、16..."),g=Object(n["g"])("%"),y=Object(n["g"])("挂起不再补仓"),O=Object(n["g"])("清仓");Object(n["x"])();var j=i((function(t,e,a,j,_,v){var V=Object(n["E"])("van-button"),w=Object(n["E"])("van-picker"),E=Object(n["E"])("van-popup"),x=Object(n["E"])("van-cell"),I=Object(n["E"])("van-field"),k=Object(n["E"])("van-stepper"),N=Object(n["E"])("van-radio"),U=Object(n["E"])("van-radio-group"),C=Object(n["E"])("van-sticky"),S=Object(n["E"])("van-form"),A=Object(n["E"])("BaseLayout");return Object(n["w"])(),Object(n["f"])(A,{title:v.title},{extra:i((function(){return[Object(n["O"])(Object(n["h"])(V,{icon:"plus",size:"small",style:{borderRadius:"10px 0 0 10px"},color:"#09F",onClick:v.onCreate},{default:i((function(){return[s]})),_:1},8,["onClick"]),[[n["L"],v.display("create")]])]})),default:i((function(){return[Object(n["h"])(E,{show:j.state.showPicker,"onUpdate:show":e[2]||(e[2]=function(t){return j.state.showPicker=t}),round:"",position:"bottom"},{default:i((function(){return[Object(n["h"])(w,{title:"选择策略模板",columns:j.state.list,"columns-field-names":{text:"name"},onCancel:e[1]||(e[1]=function(t){return j.state.showPicker=!1}),onConfirm:v.onConfirm},null,8,["columns","onConfirm"])]})),_:1},8,["show"]),Object(n["h"])(S,{class:"form",onSubmit:v.onSubmit},{default:i((function(){return[Object(n["O"])(Object(n["h"])(x,{class:["strategy",j.state.list.length>0?"animate__animated animate__repeat-2 animate__flash":""],border:!1,title:v.name,label:"共有 "+j.state.list.length+" 个策略模板","is-link":"",onClick:e[3]||(e[3]=function(t){return j.state.showPicker=!0})},null,8,["class","title","label"]),[[n["L"],v.display("choose")]]),Object(n["h"])("div",r,[Object(n["O"])(Object(n["h"])(I,{modelValue:j.state.strategy.name,"onUpdate:modelValue":e[4]||(e[4]=function(t){return j.state.strategy.name=t}),name:"name",label:"策略名称",placeholder:"策略模板的标题",rules:[{required:v.display("name"),message:"必填项"}]},null,8,["modelValue","rules"]),[[n["L"],v.display("name")]]),Object(n["O"])(Object(n["h"])(I,{modelValue:j.state.strategy.symbol,"onUpdate:modelValue":e[5]||(e[5]=function(t){return j.state.strategy.symbol=t}),name:"symbol",label:"交易对",placeholder:"只支持USDT交易对",clearable:"",rules:[{required:v.display("symbol"),message:"必填项"}],readonly:"adjust"==a.action,formatter:v.formatter},null,8,["modelValue","rules","readonly","formatter"]),[[n["L"],v.display("symbol")]]),Object(n["O"])(Object(n["h"])(I,{modelValue:j.state.strategy.amount,"onUpdate:modelValue":e[6]||(e[6]=function(t){return j.state.strategy.amount=t}),name:"amount",label:"建仓金额",placeholder:"最少 10 USDT",rules:[{required:v.display("amount"),message:"必填项"}],type:"number",min:"10","right-icon":"warning-o"},null,8,["modelValue","rules"]),[[n["L"],v.display("amount")]]),Object(n["h"])(I,{name:"rise_limit",label:"止盈率","right-icon":"warning-o"},{input:i((function(){return[Object(n["h"])(k,{class:"stepper",modelValue:j.state.strategy.rise_limit,"onUpdate:modelValue":e[7]||(e[7]=function(t){return j.state.strategy.rise_limit=t}),step:"0.1",min:"0.1",max:"100"},null,8,["modelValue"]),o]})),_:1}),Object(n["h"])(I,{name:"rise_offset",label:"止盈回调比例","right-icon":"warning-o"},{input:i((function(){return[Object(n["h"])(k,{class:"stepper",modelValue:j.state.strategy.rise_offset,"onUpdate:modelValue":e[8]||(e[8]=function(t){return j.state.strategy.rise_offset=t}),step:"0.1",min:"0",max:"100"},null,8,["modelValue"]),l]})),_:1}),Object(n["h"])(I,{name:"fall_limit",label:"补仓下跌率","right-icon":"warning-o"},{input:i((function(){return[Object(n["h"])(k,{class:"stepper",modelValue:j.state.strategy.fall_limit,"onUpdate:modelValue":e[9]||(e[9]=function(t){return j.state.strategy.fall_limit=t}),step:"0.1",min:"0.1",max:"100"},null,8,["modelValue"]),c]})),_:1}),Object(n["h"])(I,{name:"fall_offset",label:"补仓回调比例","right-icon":"warning-o"},{input:i((function(){return[Object(n["h"])(k,{class:"stepper",modelValue:j.state.strategy.fall_offset,"onUpdate:modelValue":e[10]||(e[10]=function(t){return j.state.strategy.fall_offset=t}),step:"0.1",min:"0",max:"100"},null,8,["modelValue"]),u]})),_:1}),Object(n["h"])(I,{name:"fall_count",label:"补仓次数","right-icon":"warning-o"},{input:i((function(){return[Object(n["h"])(k,{class:"stepper",modelValue:j.state.strategy.fall_count,"onUpdate:modelValue":e[11]||(e[11]=function(t){return j.state.strategy.fall_count=t}),step:"1",min:"0",max:"10"},null,8,["modelValue"]),f]})),_:1}),Object(n["h"])(I,{name:"fall_series",label:"补仓金额","right-icon":"warning-o"},{input:i((function(){return[Object(n["h"])(U,{modelValue:j.state.strategy.fall_series,"onUpdate:modelValue":e[12]||(e[12]=function(t){return j.state.strategy.fall_series=t})},{default:i((function(){return[Object(n["h"])(N,{class:"radio",name:0},{default:i((function(){return[d]})),_:1}),Object(n["h"])(N,{class:"radio",name:1},{default:i((function(){return[m]})),_:1}),Object(n["h"])(N,{class:"radio",name:2},{default:i((function(){return[h]})),_:1}),Object(n["h"])(N,{class:"radio",name:3},{default:i((function(){return[p]})),_:1}),Object(n["h"])(N,{class:"radio",name:4},{default:i((function(){return[b]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(n["h"])(I,{name:"stop_limit",label:"下跌止损比例","right-icon":"warning-o"},{input:i((function(){return[Object(n["h"])(k,{class:"stepper",modelValue:j.state.strategy.stop_limit,"onUpdate:modelValue":e[13]||(e[13]=function(t){return j.state.strategy.stop_limit=t}),step:"0.1",min:"0.1",max:"100"},null,8,["modelValue"]),g]})),_:1}),Object(n["h"])(I,{name:"stop_action",label:"止损动作","right-icon":"warning-o"},{input:i((function(){return[Object(n["h"])(U,{modelValue:j.state.strategy.stop_action,"onUpdate:modelValue":e[14]||(e[14]=function(t){return j.state.strategy.stop_action=t})},{default:i((function(){return[Object(n["h"])(N,{class:"radio",name:0},{default:i((function(){return[y]})),_:1}),Object(n["h"])(N,{class:"radio",name:1},{default:i((function(){return[O]})),_:1})]})),_:1},8,["modelValue"])]})),_:1})]),Object(n["h"])(C,{class:"submit","offset-bottom":0,position:"bottom"},{default:i((function(){return[Object(n["h"])(V,{block:"",type:"primary","native-type":"submit"},{default:i((function(){return[Object(n["g"])(Object(n["I"])(v.title),1)]})),_:1})]})),_:1})]})),_:1},8,["onSubmit"])]})),_:1},8,["title"])})),_=a("5530"),v=(a("a9e3"),a("ac1f"),a("5319"),a("a15b"),a("5502")),V=a("2824"),w={components:{BaseLayout:V["a"]},props:{action:{type:String,default:"create"},id:{type:Number,default:0}},setup:function(){var t=Object(n["A"])({showPicker:!1,symbols:[],list:[],strategy:{},default:{rise_limit:3,rise_offset:.3,fall_limit:4,fall_offset:.4,fall_count:5,fall_series:2,stop_limit:30,stop_action:0},sid:0});return{state:t}},created:function(){var t=this;this.state.strategy=this.state.default,this.$http.get("/exchange/symbol").then((function(e){return t.state.symbols=e})),this.$http.post("/exchange/strategylist").then((function(e){if("modify"==t.action&&0==e.length)return t.$toast("还没有策略模板，请先增加"),t.$router.push("/my/strategy/create");t.state.list=e}))},mounted:function(){var t=this;this.id>0&&this.$http.post("/exchange/taskdetail?id="+this.id).then((function(e){t.state.strategy=t.change(e["strategy"],100)}))},computed:Object(_["a"])({title:function(){var t={create:"新增策略模板",modify:"修改策略模板",adjust:"调整策略 #"+this.id,apply:"手动建仓"};return"undefined"!=typeof t[this.action]?t[this.action]:t.create},name:function(){return"modify"==this.action?"请先点击选择要修改的策略模板":"可点击选择策略模板，填充到下面表单中"}},Object(v["b"])(["uid"])),methods:{display:function(t){return"create"==t?"modify"==this.action:"choose"==t?"modify"==this.action||"apply"==this.action:"name"==t?"create"==this.action||"modify"==this.action:"symbol"==t?"adjust"==this.action||"apply"==this.action:"amount"==t&&"adjust"!=this.action},change:function(t,e){return Object(_["a"])(Object(_["a"])({},t),{rise_limit:t.rise_limit*e,rise_offset:t.rise_offset*e,fall_limit:t.fall_limit*e,fall_offset:t.fall_offset*e,fall_series:parseInt(t.fall_series),stop_limit:t.stop_limit*e,stop_action:parseInt(t.stop_action)})},formatter:function(t){var e=t.toUpperCase().replace(/[^\w]/g,"");return-1==this.state.symbols.join("|").toUpperCase().indexOf(e)?e.substring(0,e.length-1):e},onCreate:function(){this.state.strategy=this.state.default,this.$router.push("/my/strategy/create")},onConfirm:function(t){this.state.showPicker=!1,this.state.sid=t.id,this.state.strategy=this.change(t,100),this.$copy(t.id,!1)},onSubmit:function(t){var e=this,a="create,modify".indexOf(this.action)>-1?"strategy":"task",n="/exchange/"+a+"save",i=this.change(t,.01);if("modify"==this.action){if(0==this.state.sid)return this.$toast("请先选择要修改的策略模板");i["id"]=this.state.sid}if("adjust"==this.action){if(0==this.id)return this.$toast("缺少任务ID");i["id"]=this.id}"task"==a&&1==this.uid&&(i["test"]=1),this.$http.post(n,i).then((function(t){e.$router.push("/my/exchange")}))}}};a("0ce9");w.render=j,w.__scopeId="data-v-486e6d3a";e["default"]=w},7156:function(t,e,a){var n=a("861d"),i=a("d2bb");t.exports=function(t,e,a){var s,r;return i&&"function"==typeof(s=e.constructor)&&s!==a&&n(r=s.prototype)&&r!==a.prototype&&i(t,r),t}},a15b:function(t,e,a){"use strict";var n=a("23e7"),i=a("44ad"),s=a("fc6a"),r=a("a640"),o=[].join,l=i!=Object,c=r("join",",");n({target:"Array",proto:!0,forced:l||!c},{join:function(t){return o.call(s(this),void 0===t?",":t)}})},a9e3:function(t,e,a){"use strict";var n=a("83ab"),i=a("da84"),s=a("94ca"),r=a("6eeb"),o=a("5135"),l=a("c6b6"),c=a("7156"),u=a("c04e"),f=a("d039"),d=a("7c73"),m=a("241c").f,h=a("06cf").f,p=a("9bf2").f,b=a("58a8").trim,g="Number",y=i[g],O=y.prototype,j=l(d(O))==g,_=function(t){var e,a,n,i,s,r,o,l,c=u(t,!1);if("string"==typeof c&&c.length>2)if(c=b(c),e=c.charCodeAt(0),43===e||45===e){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+c}for(s=c.slice(2),r=s.length,o=0;o<r;o++)if(l=s.charCodeAt(o),l<48||l>i)return NaN;return parseInt(s,n)}return+c};if(s(g,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var v,V=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof V&&(j?f((function(){O.valueOf.call(a)})):l(a)!=g)?c(new y(_(e)),a,V):_(e)},w=n?m(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),E=0;w.length>E;E++)o(y,v=w[E])&&!o(V,v)&&p(V,v,h(y,v));V.prototype=O,O.constructor=V,r(i,g,V)}},d0db:function(t,e,a){}}]);
//# sourceMappingURL=chunk-2647ce14.7b936c19.js.map