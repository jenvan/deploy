import{d as h,r as f,c,w as a,v as _,a as l,b as d,e as g,f as y,g as w,F as x,_ as r,h as u,o as n,i as m,t as E}from"./index-516dfbd3.js";import{_ as I}from"./_plugin-vue_export-helper-c27b6911.js";const $={name:"Index",props:{view:{type:String,default:""}},data(){const t=Object.assign({"../../src/views/Collection.vue":()=>r(()=>import("./Collection-e22bf279.js"),["assets/Collection-e22bf279.js","assets/index-516dfbd3.js","assets/index-b9588dc1.css","assets/BaseLayout-ff57a6ae.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/BaseLayout-3a329a38.css","assets/Collection-d5dc60f9.css"]),"../../src/views/Coupon.vue":()=>r(()=>import("./Coupon-d8605448.js"),["assets/Coupon-d8605448.js","assets/index-516dfbd3.js","assets/index-b9588dc1.css","assets/BaseLayout-ff57a6ae.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/BaseLayout-3a329a38.css","assets/Coupon-c79afe79.css"]),"../../src/views/Home.vue":()=>r(()=>import("./Home-6c122594.js"),["assets/Home-6c122594.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/Home-e27a73f6.css"]),"../../src/views/My.vue":()=>r(()=>import("./My-f462af85.js"),["assets/My-f462af85.js","assets/index-516dfbd3.js","assets/index-b9588dc1.css","assets/_plugin-vue_export-helper-c27b6911.js","assets/My-3cbf220f.css"]),"../../src/views/Union.vue":()=>r(()=>import("./Union-53c4e6e9.js"),["assets/Union-53c4e6e9.js","assets/index-516dfbd3.js","assets/index-b9588dc1.css","assets/BaseLayout-ff57a6ae.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/BaseLayout-3a329a38.css","assets/Union-f1b5bb65.css"])}),s=t[`../../src/${this.view}`]?h(t[`../../src/${this.view}`]):{template:"<van-empty>欢迎您的到来 ~</van-empty>"},e=f({info:""}),i=this.$route.query.code?this.$route.query.code:"",o=this.$route.query.redirect?this.$route.query.redirect:"/my";return{home:s,state:e,code:i,redirect:o}},mounted(){!this.$store.authorized&&this.code.length>0&&this.$http.get("/wechat/login?code="+this.code+"&trial=1").then(e=>{this.$store.auth(e),this.$router.replace(this.redirect)}).catch(e=>{e.rtn!=996&&(this.state.info=e.msg)});let t=this.$store.state.scrollInfo,s=t&&t.tag=="index"?t.top:0;s>500&&setTimeout(()=>{document.querySelector("#container").scrollTo(0,s)},1e3)},beforeRouteLeave(t,s,e){let i={tag:"index",top:document.querySelector("#container").scrollTop};this.$store.setScrollInfo(i),e()}},T={key:0,class:"loading"};function D(t,s,e,i,o,V){const p=u("van-loading"),v=u("van-empty");return n(),c(x,null,[o.code.length>0?(n(),c("div",T,[a(l(p,{size:"64",vertical:""},{default:d(()=>[m("正在登录中 ...")]),_:1},512),[[_,o.state.info.length==0]]),a(l(v,{image:"error"},{default:d(()=>[m(E(o.state.info),1)]),_:1},512),[[_,o.state.info.length>0]])])):g("",!0),(n(),y(w(o.home)))],64)}const q=I($,[["render",D],["__scopeId","data-v-8e861be6"]]);export{q as default};
