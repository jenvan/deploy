import{r as f,a,o as s,c as h,w as c,v as r,b as i,d as l,e as u,f as d,t as g}from"./index-fec0a343.js";import v from"./Home-6c122594.js";import{_ as x}from"./_plugin-vue_export-helper-c27b6911.js";const y={name:"Index",components:{Home:v},props:{code:{type:String,default:""},redirect:{type:String,default:"/"}},setup(){return{state:f({info:""})}},mounted(){this.code.length>0&&this.$http.get("/wechat/login?code="+this.code+"&trial=1").then(t=>{this.$store.auth(t),this.$router.replace(this.redirect)}).catch(t=>{t.rtn!=996&&(this.state.info=t.msg)});let e=this.$store.state.scrollInfo,n=e&&e.tag=="index"?e.top:0;n>500&&setTimeout(()=>{document.querySelector("#container").scrollTo(0,n)},1e3)},beforeRouteLeave(e,n,t){let o={tag:"index",top:document.querySelector("#container").scrollTop};this.$store.setScrollInfo(o),t()}},S={key:0,class:"loading"};function I(e,n,t,o,k,w){const _=a("van-loading"),p=a("van-empty"),m=a("home");return t.code.length>0?(s(),h("div",S,[c(i(_,{size:"64",vertical:""},{default:l(()=>[d("正在登录中 ...")]),_:1},512),[[r,o.state.info.length==0]]),c(i(p,{image:"error"},{default:l(()=>[d(g(o.state.info),1)]),_:1},512),[[r,o.state.info.length>0]])])):(s(),u(m,{key:1,production:!0}))}const B=x(y,[["render",I],["__scopeId","data-v-07072c3f"]]);export{B as default};
