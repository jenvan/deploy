import{d as u,r as f,c as a,w as c,v as i,a as l,b as d,e as v,f as g,g as y,F as x,h as _,o as s,i as p,t as $,_ as w}from"./index-d110bc65.js";import{_ as I}from"./_plugin-vue_export-helper-c27b6911.js";const q={name:"Index",props:{view:{type:String,default:""}},data(){const t=u({loader:()=>w(()=>import(`../../src/${this.view}`),[]),errorComponent:{template:"<van-empty>欢迎您的到来 ~</van-empty>"}}),o=f({info:""}),e=this.$route.query.code?this.$route.query.code:"",r=this.$route.query.redirect?this.$route.query.redirect:"/";return{home:t,state:o,code:e,redirect:r}},mounted(){this.code.length>0&&this.$http.get("/wechat/login?code="+this.code+"&trial=1").then(e=>{this.$store.auth(e),this.$router.replace(this.redirect)}).catch(e=>{e.rtn!=996&&(this.state.info=e.msg)});let t=this.$store.state.scrollInfo,o=t&&t.tag=="index"?t.top:0;o>500&&setTimeout(()=>{document.querySelector("#container").scrollTo(0,o)},1e3)},beforeRouteLeave(t,o,e){let r={tag:"index",top:document.querySelector("#container").scrollTop};this.$store.setScrollInfo(r),e()}},C={key:0,class:"loading"};function S(t,o,e,r,n,T){const m=_("van-loading"),h=_("van-empty");return s(),a(x,null,[n.code.length>0?(s(),a("div",C,[c(l(m,{size:"64",vertical:""},{default:d(()=>[p("正在登录中 ...")]),_:1},512),[[i,n.state.info.length==0]]),c(l(h,{image:"error"},{default:d(()=>[p($(n.state.info),1)]),_:1},512),[[i,n.state.info.length>0]])])):v("",!0),(s(),g(y(n.home)))],64)}const V=I(q,[["render",S],["__scopeId","data-v-96acd749"]]);export{V as default};
